{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useHistory}from'react-router-dom';import'./ManagerDashboard.css';import{FaPlus,FaClipboardList,FaUtensils}from'react-icons/fa';import{refreshAccessToken}from'./authHelpers';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ManagerDashboard=()=>{const history=useHistory();const[managerName,setManagerName]=useState('');const[loading,setLoading]=useState(true);useEffect(()=>{const managerId=localStorage.getItem('restaurantManagerId');const token=localStorage.getItem('restaurantAccessToken');if(!token||!managerId){history.push('/restaurant-manager/login');return;}const fetchManagerData=async()=>{try{const response=await fetch(`/api/restaurant-manager/${managerId}`,{headers:{Authorization:`Bearer ${token}`}});if(response.status===401){const refreshed=await refreshAccessToken();if(refreshed){const newToken=localStorage.getItem('restaurantAccessToken');const retryResponse=await fetch(`/api/restaurant-manager/${managerId}`,{headers:{Authorization:`Bearer ${newToken}`}});const retryData=await retryResponse.json();setManagerName(retryData.name);return;}else{return;}}const data=await response.json();setManagerName(data.name);}catch(error){console.error('Error fetching manager data:',error);history.push('/restaurant-manager/login');}finally{setLoading(false);}};fetchManagerData();},[history]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-page\",children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-page\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"dashboard-heading\",children:[\"Welcome \",managerName,\"! \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"Let's help you manage your restaurants\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",onClick:()=>history.push('/restaurant-manager/my-restaurants'),children:[/*#__PURE__*/_jsx(FaClipboardList,{size:40}),/*#__PURE__*/_jsx(\"p\",{children:\"Show My Restaurants\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",onClick:()=>history.push('/restaurant-manager/manage-restaurants'),children:[/*#__PURE__*/_jsx(FaPlus,{size:40}),/*#__PURE__*/_jsx(\"p\",{children:\"Add/Manage Restaurant\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-card\",onClick:()=>history.push('/restaurant-manager/manage-menu'),children:[/*#__PURE__*/_jsx(FaUtensils,{size:40}),/*#__PURE__*/_jsx(\"p\",{children:\"Add/Manage Menu\"})]})]})]});};export default ManagerDashboard;","map":{"version":3,"names":["React","useEffect","useState","useHistory","FaPlus","FaClipboardList","FaUtensils","refreshAccessToken","jsx","_jsx","jsxs","_jsxs","ManagerDashboard","history","managerName","setManagerName","loading","setLoading","managerId","localStorage","getItem","token","push","fetchManagerData","response","fetch","headers","Authorization","status","refreshed","newToken","retryResponse","retryData","json","name","data","error","console","className","children","onClick","size"],"sources":["/Users/rohan/Desktop/team-project-2024849-sprinters/front-end/src/components/RestaurantManager/ManagerDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './ManagerDashboard.css';\nimport { FaPlus, FaClipboardList, FaUtensils } from 'react-icons/fa';\nimport { refreshAccessToken } from './authHelpers';\n\nconst ManagerDashboard = () => {\n    const history = useHistory();\n    const [managerName, setManagerName] = useState('');\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const managerId = localStorage.getItem('restaurantManagerId');\n        const token = localStorage.getItem('restaurantAccessToken');\n\n        if (!token || !managerId) {\n            history.push('/restaurant-manager/login');\n            return;\n        }\n\n        const fetchManagerData = async () => {\n            try {\n                const response = await fetch(`/api/restaurant-manager/${managerId}`, {\n                    headers: {\n                        Authorization: `Bearer ${token}`\n                    }\n                });\n\n                if (response.status === 401) {\n                    const refreshed = await refreshAccessToken();\n                    if (refreshed) {\n                        const newToken = localStorage.getItem('restaurantAccessToken');\n                        const retryResponse = await fetch(`/api/restaurant-manager/${managerId}`, {\n                            headers: { Authorization: `Bearer ${newToken}` }\n                        });\n                        const retryData = await retryResponse.json();\n                        setManagerName(retryData.name);\n                        return;\n                    } else {\n                        return;\n                    }\n                }\n\n                const data = await response.json();\n                setManagerName(data.name);\n            } catch (error) {\n                console.error('Error fetching manager data:', error);\n                history.push('/restaurant-manager/login');\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchManagerData();\n    }, [history]);\n\n    if (loading) {\n        return <div className=\"dashboard-page\">Loading...</div>;\n    }\n\n    return (\n        <div className=\"dashboard-page\">\n            <h1 className=\"dashboard-heading\">\n                Welcome {managerName}! <br/><br/>\n                Let's help you manage your restaurants\n            </h1>\n            <div className=\"dashboard-grid\">\n                <div className=\"dashboard-card\" onClick={() => history.push('/restaurant-manager/my-restaurants')}>\n                    <FaClipboardList size={40} />\n                    <p>Show My Restaurants</p>\n                </div>\n                <div className=\"dashboard-card\" onClick={() => history.push('/restaurant-manager/manage-restaurants')}>\n                    <FaPlus size={40} />\n                    <p>Add/Manage Restaurant</p>\n                </div>\n                <div className=\"dashboard-card\" onClick={() => history.push('/restaurant-manager/manage-menu')}>\n                    <FaUtensils size={40} />\n                    <p>Add/Manage Menu</p>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default ManagerDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}