{"ast":null,"code":"import React,{useState}from'react';import{useSelector,useDispatch}from'react-redux';import{Redirect}from'react-router-dom';import{login}from'../../store/session';import'./LoginForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginForm=_ref=>{let{setShowSignInModal}=_ref;const user=useSelector(state=>state.session.user);const dispatch=useDispatch();const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[validationErrors,setValidationErrors]=useState('');const[errors,setErrors]=useState([]);const onLogin=async e=>{e.preventDefault();const errors=[];if(!email)errors.push(\"Please enter your email address\");if(!password)errors.push(\"Please enter your password\");setValidationErrors(errors);if(!errors.length){const data=await dispatch(login(email,password));if(data){const backendErrors=[];data.forEach(error=>{let arr=error.split(': ');backendErrors.push(arr[1]);});setErrors(backendErrors);}else{setShowSignInModal(false);}}};const demoUserLogin=async e=>{e.preventDefault();await dispatch(login('demo@aa.io','password'));setShowSignInModal(false);};const updateEmail=e=>{setValidationErrors([]);setEmail(e.target.value);};const updatePassword=e=>{setValidationErrors([]);setPassword(e.target.value);};// if (user) {\n//   return <Redirect to='/' />;\n// }\nreturn/*#__PURE__*/_jsxs(\"form\",{onSubmit:onLogin,className:\"login-form\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome to ReserveTable!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"sign-in-form-error-messages\",children:[validationErrors.length>0&&validationErrors.map(error=>/*#__PURE__*/_jsx(\"div\",{children:error},error)),errors.map((error,ind)=>/*#__PURE__*/_jsx(\"div\",{children:error},ind))]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"text\",placeholder:\"Email\",value:email,onChange:updateEmail,className:\"sign-in-input\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",placeholder:\"Password\",value:password,onChange:updatePassword,className:\"sign-in-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"sign-in-form-button1\",children:\"Login\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:demoUserLogin,className:\"sign-in-form-button2\",children:\"Demo User\"})})]});};export default LoginForm;","map":{"version":3,"names":["React","useState","useSelector","useDispatch","Redirect","login","jsx","_jsx","jsxs","_jsxs","LoginForm","_ref","setShowSignInModal","user","state","session","dispatch","email","setEmail","password","setPassword","validationErrors","setValidationErrors","errors","setErrors","onLogin","e","preventDefault","push","length","data","backendErrors","forEach","error","arr","split","demoUserLogin","updateEmail","target","value","updatePassword","onSubmit","className","children","map","ind","name","type","placeholder","onChange","onClick"],"sources":["/Users/rohan/Desktop/team-project-2024849-sprinters/front-end/src/components/_auth/LoginForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { login } from '../../store/session';\nimport './LoginForm.css';\n\nconst LoginForm = ({ setShowSignInModal }) => {\n  const user = useSelector(state => state.session.user);\n  const dispatch = useDispatch();\n\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [validationErrors, setValidationErrors] = useState('');\n  const [errors, setErrors] = useState([]);\n\n  const onLogin = async (e) => {\n    e.preventDefault();\n    const errors = [];\n\n    if (!email) errors.push(\"Please enter your email address\");\n    if (!password) errors.push(\"Please enter your password\");\n\n    setValidationErrors(errors);\n\n    if (!errors.length) {\n      const data = await dispatch(login(email, password));\n      if (data) {\n        const backendErrors = [];\n        data.forEach(error => {\n          let arr = error.split(': ');\n          backendErrors.push(arr[1])\n        })\n        setErrors(backendErrors);\n      } else {\n        setShowSignInModal(false);\n      }\n    }\n  };\n\n  const demoUserLogin = async (e) => {\n    e.preventDefault();\n    await dispatch(login('demo@aa.io', 'password'));\n    setShowSignInModal(false);\n  }\n\n  const updateEmail = (e) => {\n    setValidationErrors([]);\n    setEmail(e.target.value);\n  };\n\n  const updatePassword = (e) => {\n    setValidationErrors([]);\n    setPassword(e.target.value);\n  };\n\n  // if (user) {\n  //   return <Redirect to='/' />;\n  // }\n\n  return (\n    <form onSubmit={onLogin} className=\"login-form\">\n      <h1>Welcome to ReserveTable!</h1>\n      <div className=\"sign-in-form-error-messages\">\n        {validationErrors.length > 0 &&\n          validationErrors.map(error => (\n            <div key={error}>{error}</div>\n          ))}\n        {errors.map((error, ind) => (\n          <div key={ind}>{error}</div>\n        ))}\n      </div>\n      <div>\n        {/* <label htmlFor='email'>Email</label> */}\n        <input\n          name='email'\n          type='text'\n          placeholder='Email'\n          value={email}\n          onChange={updateEmail}\n          className=\"sign-in-input\"\n        />\n      </div>\n      <div>\n        {/* <label htmlFor='password'>Password</label> */}\n        <input\n          name='password'\n          type='password'\n          placeholder='Password'\n          value={password}\n          onChange={updatePassword}\n          className=\"sign-in-input\"\n        />\n        <button type='submit' className=\"sign-in-form-button1\">Login</button>\n      </div>\n      <div>\n        <button onClick={demoUserLogin} className=\"sign-in-form-button2\">Demo User</button>\n      </div>\n    </form>\n  );\n};\n\nexport default LoginForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}