{"ast":null,"code":"/* ------------------------------ Action Types -------------------------- */const SET_USER='session/SET_USER';const REMOVE_USER='session/REMOVE_USER';/* ---------------------------- Action Creators -------------------------- */const setUser=user=>({type:SET_USER,payload:user});const removeUser=()=>({type:REMOVE_USER});/* ---------------------------- Thunk Action Creators ----------------------- */export const authenticate=()=>async dispatch=>{const response=await fetch('/api/auth/',{headers:{'Content-Type':'application/json'}});if(response.ok){const data=await response.json();if(data.errors){return;}dispatch(setUser(data));}};export const login=(email,password)=>async dispatch=>{const response=await fetch('/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});if(response.ok){const data=await response.json();dispatch(setUser(data));return null;}else if(response.status<500){const data=await response.json();if(data.errors){return data.errors;}}else{return['An error occurred. Please try again.'];}};export const logout=()=>async dispatch=>{const response=await fetch('/api/auth/logout',{headers:{'Content-Type':'application/json'}});if(response.ok){dispatch(removeUser());}};export const signUp=(username,email,firstName,lastName,password)=>async dispatch=>{const response=await fetch('/api/auth/signup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,email,first_name:firstName,last_name:lastName,password})});if(response.ok){const data=await response.json();dispatch(setUser(data));return null;}else if(response.status<500){const data=await response.json();if(data.errors){return data.errors;}}else{return['An error occurred. Please try again.'];}};/* -------------------------------- Reducer ---------------------------- */const initialState={user:null};export default function reducer(){let state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;let action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SET_USER:return{user:action.payload};case REMOVE_USER:return{user:null};default:return state;}}","map":{"version":3,"names":["SET_USER","REMOVE_USER","setUser","user","type","payload","removeUser","authenticate","dispatch","response","fetch","headers","ok","data","json","errors","login","email","password","method","body","JSON","stringify","status","logout","signUp","username","firstName","lastName","first_name","last_name","initialState","reducer","state","arguments","length","undefined","action"],"sources":["/Users/rohan/Desktop/team-project-2024849-sprinters/front-end/src/store/session.js"],"sourcesContent":["/* ------------------------------ Action Types -------------------------- */\n\nconst SET_USER = 'session/SET_USER';\nconst REMOVE_USER = 'session/REMOVE_USER';\n\n/* ---------------------------- Action Creators -------------------------- */\n\nconst setUser = (user) => ({\n  type: SET_USER,\n  payload: user\n});\n\nconst removeUser = () => ({\n  type: REMOVE_USER,\n})\n\n/* ---------------------------- Thunk Action Creators ----------------------- */\n\n\nexport const authenticate = () => async (dispatch) => {\n  const response = await fetch('/api/auth/', {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  if (response.ok) {\n    const data = await response.json();\n    if (data.errors) {\n      return;\n    }\n\n    dispatch(setUser(data));\n  }\n}\n\n\nexport const login = (email, password) => async (dispatch) => {\n  const response = await fetch('/api/auth/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n\n  if (response.ok) {\n    const data = await response.json();\n    dispatch(setUser(data))\n    return null;\n  } else if (response.status < 500) {\n    const data = await response.json();\n    if (data.errors) {\n      return data.errors;\n    }\n  } else {\n    return ['An error occurred. Please try again.']\n  }\n}\n\n\nexport const logout = () => async (dispatch) => {\n  const response = await fetch('/api/auth/logout', {\n    headers: {\n      'Content-Type': 'application/json',\n    }\n  });\n\n  if (response.ok) {\n    dispatch(removeUser());\n  }\n};\n\n\nexport const signUp = (username, email, firstName, lastName, password) => async (dispatch) => {\n  const response = await fetch('/api/auth/signup', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      username,\n      email,\n      first_name: firstName,\n      last_name: lastName,\n      password,\n    }),\n  });\n\n  if (response.ok) {\n    const data = await response.json();\n    dispatch(setUser(data))\n    return null;\n  } else if (response.status < 500) {\n    const data = await response.json();\n    if (data.errors) {\n      return data.errors;\n    }\n  } else {\n    return ['An error occurred. Please try again.']\n  }\n}\n\n\n/* -------------------------------- Reducer ---------------------------- */\n\nconst initialState = { user: null };\n\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case SET_USER:\n      return { user: action.payload }\n    case REMOVE_USER:\n      return { user: null }\n    default:\n      return state;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}