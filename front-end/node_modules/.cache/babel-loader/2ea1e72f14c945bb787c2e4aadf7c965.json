{"ast":null,"code":"import{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useHistory}from\"react-router-dom\";import{getAllUserReservations}from\"../../store/reservations\";import upcomingRestaurantIcon from'../../icons/upcoming-reservation-logo.ico';import personIcon from'../../icons/person-icon.ico';import clockIcon from'../../icons/clock-icon.ico';import upcomingReservationIcon from'../../icons/upcoming-reservations-icon.ico';import dayjs from'dayjs';import'./UpcomingReservationsMenu.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function UpcomingReservationsMenu(){var _nextReservation$rest;const dispatch=useDispatch();const history=useHistory();const sessionUser=useSelector(state=>state.session.user);const userReservationsObj=useSelector(state=>state.reservations);const userReservations=Object.values(userReservationsObj);const upcomingReservations=userReservations.filter(reservation=>dayjs().isBefore(reservation.reservation_time)).sort((reservationA,reservationB)=>{return dayjs(reservationA.reservation_time).valueOf()-dayjs(reservationB.reservation_time).valueOf();});const nextReservation=upcomingReservations[0];useEffect(()=>{dispatch(getAllUserReservations(sessionUser.id));},[dispatch,sessionUser]);const routeToReservationConfirmation=()=>{history.push(`/reservations/${nextReservation.id}`);};const routeToCancelReservationModal=()=>{history.push(`/reservations/${nextReservation.id}?showCancelModal=true`);};const routeToDiningDashboard=()=>{history.push(`/users/${sessionUser.id}/dining-dashboard`);};return/*#__PURE__*/_jsx(_Fragment,{children:nextReservation?/*#__PURE__*/_jsx(\"div\",{className:\"upcoming-reservations-menu-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"next-reservation-details-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"upcoming-reservations-menu-heading\",children:\"Upcoming reservations\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"upcoming-reservation-menu-icon-name\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:upcomingRestaurantIcon,alt:\"\",className:\"upcoming-restaurant-icon\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"upcoming-reservation-menu-name\",children:(_nextReservation$rest=nextReservation.restaurant)===null||_nextReservation$rest===void 0?void 0:_nextReservation$rest.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"upcoming-reservation-menu-date-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"upcoming-reservation-menu-party-size\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:personIcon,alt:\"\",className:\"upcoming-reservation-menu-person-icon\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"upcoming-reservation-party-size-text\",children:[\"Table for \",nextReservation.party_size,\" people\"]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"upcoming-reservation-menu-time\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:clockIcon,alt:\"\",className:\"upcoming-reservations-clock-icon\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"upcoming-reservation-reservation-time\",children:dayjs(nextReservation.reservation_time).format(\"h:mm A\")})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"upcoming-reservation-menu-time\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:upcomingReservationIcon,alt:\"\",className:\"upcoming-reservation-menu-icon\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"upcoming-reservation-menu-time-details\",children:dayjs(nextReservation.reservation_time).format(\"MMM D, YYYY\")})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"upcoming-reservation-menu-options\",children:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:routeToReservationConfirmation,className:\"upcoming-reservation-button\",children:\"View \"}),/*#__PURE__*/_jsx(\"span\",{className:\"upcoming-reservation-menu-dot\",children:\"\\xA0\\xB7\\xA0\"}),/*#__PURE__*/_jsx(\"button\",{onClick:routeToReservationConfirmation,className:\"upcoming-reservation-button\",children:\" Modify \"}),/*#__PURE__*/_jsx(\"span\",{className:\"upcoming-reservation-menu-dot\",children:\"\\xB7\\xA0\"}),/*#__PURE__*/_jsx(\"button\",{className:\"upcoming-reservation-button-no-pointer\",children:\"Invite guests\"})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{onClick:routeToCancelReservationModal,className:\"upcoming-reservation-menu-cancel-button\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"div\",{className:\"upcoming-reservation-menu-border-line\"})]}),/*#__PURE__*/_jsx(\"div\",{onClick:routeToDiningDashboard,className:\"upcoming-reservation-view-all-reservations-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"upcoming-reservation-view-all-reservations\",children:\"View all reservations\"})})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"upcoming-reservation-menu-none\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"upcoming-reservations-menu-none-heading\",children:\"Upcoming reservations\"}),/*#__PURE__*/_jsx(\"div\",{className:\"upcoming-reservations-menu-none-message\",children:\"You have no upcoming reservations\"})]})});}export default UpcomingReservationsMenu;","map":{"version":3,"names":["useEffect","useDispatch","useSelector","useHistory","getAllUserReservations","upcomingRestaurantIcon","personIcon","clockIcon","upcomingReservationIcon","dayjs","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UpcomingReservationsMenu","_nextReservation$rest","dispatch","history","sessionUser","state","session","user","userReservationsObj","reservations","userReservations","Object","values","upcomingReservations","filter","reservation","isBefore","reservation_time","sort","reservationA","reservationB","valueOf","nextReservation","id","routeToReservationConfirmation","push","routeToCancelReservationModal","routeToDiningDashboard","children","className","src","alt","restaurant","name","party_size","format","onClick"],"sources":["/Users/rohan/Desktop/team-project-2024849-sprinters/front-end/src/components/Reservations/UpcomingReservationsMenu.js"],"sourcesContent":["import { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport { getAllUserReservations } from \"../../store/reservations\";\nimport upcomingRestaurantIcon from '../../icons/upcoming-reservation-logo.ico';\nimport personIcon from '../../icons/person-icon.ico';\nimport clockIcon from '../../icons/clock-icon.ico';\nimport upcomingReservationIcon from '../../icons/upcoming-reservations-icon.ico';\nimport dayjs from 'dayjs';\nimport './UpcomingReservationsMenu.css';\n\n\n\nfunction UpcomingReservationsMenu() {\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const sessionUser = useSelector(state => state.session.user);\n    const userReservationsObj = useSelector(state => state.reservations);\n    const userReservations = Object.values(userReservationsObj);\n \n    const upcomingReservations = userReservations\n        .filter(reservation => dayjs().isBefore(reservation.reservation_time))\n        .sort((reservationA, reservationB) => {\n            return dayjs(reservationA.reservation_time).valueOf() - dayjs(reservationB.reservation_time).valueOf()\n        })\n\n    const nextReservation = upcomingReservations[0];\n\n    useEffect(() => {\n        dispatch(getAllUserReservations(sessionUser.id));\n    }, [dispatch, sessionUser])\n\n    const routeToReservationConfirmation = () => {\n        history.push(`/reservations/${nextReservation.id}`)\n    };\n\n    const routeToCancelReservationModal = () => {\n        history.push(`/reservations/${nextReservation.id}?showCancelModal=true`);\n    }\n\n    const routeToDiningDashboard = () => {\n        history.push(`/users/${sessionUser.id}/dining-dashboard`);\n    }\n\n\n    \n    return (\n        <>\n            {nextReservation\n                ?\n                <div className=\"upcoming-reservations-menu-container\">\n                    <div className=\"next-reservation-details-container\">\n                        <div className=\"upcoming-reservations-menu-heading\">\n                            Upcoming reservations\n                        </div>\n                        <div className=\"upcoming-reservation-menu-icon-name\">\n                            <div>\n                                <img src={upcomingRestaurantIcon} alt=\"\" className=\"upcoming-restaurant-icon\" />\n                            </div>\n                            <div className=\"upcoming-reservation-menu-name\">\n                                {nextReservation.restaurant?.name}\n                            </div>\n                        </div>\n                        <div className=\"upcoming-reservation-menu-date-details\">\n                            <div className=\"upcoming-reservation-menu-party-size\">\n                                <div>\n                                    <img src={personIcon} alt=\"\" className=\"upcoming-reservation-menu-person-icon\" />\n                                </div>\n                                <div className=\"upcoming-reservation-party-size-text\">\n                                    Table for {nextReservation.party_size} people\n                                </div>\n                            </div>\n                            <div>\n                                <div className=\"upcoming-reservation-menu-time\">\n                                    <div>\n                                        <img src={clockIcon} alt=\"\" className=\"upcoming-reservations-clock-icon\" />\n                                    </div>\n                                    <div className=\"upcoming-reservation-reservation-time\">\n                                        {dayjs(nextReservation.reservation_time).format(\"h:mm A\")}\n                                    </div>\n                                </div>\n                            </div>\n                            <div>\n                                <div className=\"upcoming-reservation-menu-time\">\n                                    <div>\n                                        <img src={upcomingReservationIcon} alt=\"\" className=\"upcoming-reservation-menu-icon\" />\n                                    </div>\n                                    <div>\n                                        <div className=\"upcoming-reservation-menu-time-details\">\n                                            {dayjs(nextReservation.reservation_time).format(\"MMM D, YYYY\")}\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"upcoming-reservation-menu-options\">\n                            <span>\n                                <button onClick={routeToReservationConfirmation} className=\"upcoming-reservation-button\">View </button>\n                                <span className=\"upcoming-reservation-menu-dot\">&nbsp;·&nbsp;</span>\n                                <button onClick={routeToReservationConfirmation} className=\"upcoming-reservation-button\"> Modify </button>\n                                <span className=\"upcoming-reservation-menu-dot\">·&nbsp;</span>\n                                <button className=\"upcoming-reservation-button-no-pointer\">Invite guests</button>\n                            </span>\n                        </div>\n                        <div>\n                            <div onClick={routeToCancelReservationModal} className=\"upcoming-reservation-menu-cancel-button\">\n                                Cancel\n                            </div>\n                            <div className=\"upcoming-reservation-menu-border-line\">\n                            </div>\n                        </div>\n                        <div onClick={routeToDiningDashboard} className=\"upcoming-reservation-view-all-reservations-container\">\n                            <div className=\"upcoming-reservation-view-all-reservations\">\n                                View all reservations\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                :\n                <div className=\"upcoming-reservation-menu-none\">\n                    <div className=\"upcoming-reservations-menu-none-heading\">\n                        Upcoming reservations\n                    </div>\n                    <div className=\"upcoming-reservations-menu-none-message\">\n                        You have no upcoming reservations\n                    </div>\n                </div>\n            }\n        </>\n    )\n}\n\n\n\nexport default UpcomingReservationsMenu;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}