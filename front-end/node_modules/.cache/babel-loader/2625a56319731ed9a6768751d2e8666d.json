{"ast":null,"code":"import{csrfFetch}from\"./csrf\";/* ----------------------------- Action Types -------------------------- */const LOAD_ALL_RESTAURANT_REVIEWS='/reviews/LOAD_ALL_RESTAURANT_REVIEWS';const LOAD_ALL_USER_REVIEWS='/reviews/LOAD_ALL_USER_REVIEWS';const ADD_REVIEW='/reviews/ADD_REVIEW';const UPDATE_REVIEW='/reviews/UPDATE_REVIEW';const DELETE_REVIEW='/reviews/DELETE_REVIEW';const RESET_REVIEWS='/reviews/RESET_REVIEWS';/* ----------------------------- Action Creators ------------------------ */const loadAllRestaurantReviews=reviews=>{return{type:LOAD_ALL_RESTAURANT_REVIEWS,reviews:reviews};};const loadAllUserReviews=reviews=>{return{type:LOAD_ALL_USER_REVIEWS,reviews:reviews};};const addReview=review=>{return{type:ADD_REVIEW,review:review};};const updateReview=review=>{return{type:UPDATE_REVIEW,review:review};};const removeReview=reviewId=>{return{type:DELETE_REVIEW,reviewId:reviewId};};export const resetReviews=()=>{return{type:RESET_REVIEWS};};/* ---------------------------- Thunk Action Creators ----------------------- */export const getAllRestaurantReviews=restaurantId=>async dispatch=>{try{const response=await csrfFetch(`/api/restaurants/${restaurantId}/reviews`);if(response.ok){const reviews=await response.json();dispatch(loadAllRestaurantReviews(reviews));return reviews;}}catch(e){}};export const getUserReviews=userId=>async dispatch=>{try{const response=await csrfFetch(`/api/users/${userId}/reviews`);if(response.ok){const reviews=await response.json();dispatch(loadAllUserReviews(reviews));return reviews;}}catch(e){}};export const createReview=(reviewData,restaurantId)=>async dispatch=>{const response=await csrfFetch(`/api/restaurants/${restaurantId}/reviews`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(reviewData)});if(response.ok){const newReview=await response.json();dispatch(addReview(newReview));return newReview;}};export const editReview=(reviewData,reviewId)=>async dispatch=>{const response=await csrfFetch(`/api/reviews/${reviewId}`,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(reviewData)});if(response.ok){const review=await response.json();dispatch(updateReview(review));return review;}};export const deleteReview=reviewId=>async dispatch=>{const response=await csrfFetch(`/api/reviews/${reviewId}`,{method:'DELETE'});if(response.ok){const message=await response.json();dispatch(removeReview(reviewId));return message;}};/* -------------------------------- Reducer ------------------------- */const initialState={};const reviewsReducer=function(){let state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;let action=arguments.length>1?arguments[1]:undefined;let newState={};switch(action.type){case LOAD_ALL_RESTAURANT_REVIEWS:// newState = { ...state };\naction.reviews.forEach(review=>{newState[review.id]=review;});return newState;case LOAD_ALL_USER_REVIEWS:// newState = { ...state }\nnewState={};action.reviews.forEach(review=>{newState[review.id]=review;});return newState;case ADD_REVIEW:newState={...state};newState[action.review.id]=action.review;return newState;case UPDATE_REVIEW:newState={...state};newState[action.review.id]=action.review;return newState;case DELETE_REVIEW:newState={...state};delete newState[action.reviewId];return newState;case RESET_REVIEWS:newState={};return newState;default:return state;}};export default reviewsReducer;","map":{"version":3,"names":["csrfFetch","LOAD_ALL_RESTAURANT_REVIEWS","LOAD_ALL_USER_REVIEWS","ADD_REVIEW","UPDATE_REVIEW","DELETE_REVIEW","RESET_REVIEWS","loadAllRestaurantReviews","reviews","type","loadAllUserReviews","addReview","review","updateReview","removeReview","reviewId","resetReviews","getAllRestaurantReviews","restaurantId","dispatch","response","ok","json","e","getUserReviews","userId","createReview","reviewData","method","headers","body","JSON","stringify","newReview","editReview","deleteReview","message","initialState","reviewsReducer","state","arguments","length","undefined","action","newState","forEach","id"],"sources":["/Users/rohan/Desktop/team-project-2024849-sprinters/front-end/src/store/reviews.js"],"sourcesContent":["import { csrfFetch } from \"./csrf\";\n\n\n/* ----------------------------- Action Types -------------------------- */\n\nconst LOAD_ALL_RESTAURANT_REVIEWS = '/reviews/LOAD_ALL_RESTAURANT_REVIEWS'\nconst LOAD_ALL_USER_REVIEWS = '/reviews/LOAD_ALL_USER_REVIEWS'\nconst ADD_REVIEW = '/reviews/ADD_REVIEW'\nconst UPDATE_REVIEW = '/reviews/UPDATE_REVIEW'\nconst DELETE_REVIEW = '/reviews/DELETE_REVIEW'\nconst RESET_REVIEWS = '/reviews/RESET_REVIEWS'\n\n\n/* ----------------------------- Action Creators ------------------------ */\n\nconst loadAllRestaurantReviews = (reviews) => {\n    return {\n        type: LOAD_ALL_RESTAURANT_REVIEWS,\n        reviews: reviews\n    }\n}\n\nconst loadAllUserReviews = (reviews) => {\n    return {\n        type: LOAD_ALL_USER_REVIEWS,\n        reviews: reviews\n    }\n}\n\nconst addReview = (review) => {\n    return {\n        type: ADD_REVIEW,\n        review: review\n    }\n}\n\nconst updateReview = (review) => {\n    return {\n        type: UPDATE_REVIEW,\n        review: review\n    }\n}\n\nconst removeReview = (reviewId) => {\n    return {\n        type: DELETE_REVIEW,\n        reviewId: reviewId\n    }\n}\n\nexport const resetReviews = () => {\n    return {\n        type: RESET_REVIEWS\n    }\n}\n\n\n/* ---------------------------- Thunk Action Creators ----------------------- */\n\n\nexport const getAllRestaurantReviews = (restaurantId) => async (dispatch) => {\n    try {\n        const response = await csrfFetch(`/api/restaurants/${restaurantId}/reviews`);\n\n        if (response.ok) {\n            const reviews = await response.json();\n            dispatch(loadAllRestaurantReviews(reviews));\n            return reviews;\n        }\n    } catch(e) {\n\n    }\n}\n\nexport const getUserReviews = (userId) => async (dispatch) => {\n    try {\n        const response = await csrfFetch(`/api/users/${userId}/reviews`);\n\n        if (response.ok) {\n            const reviews = await response.json();\n            dispatch(loadAllUserReviews(reviews));\n            return reviews;\n        }\n    } catch(e) {\n\n    }\n}\n\nexport const createReview = (reviewData, restaurantId) => async (dispatch) => {\n    const response = await csrfFetch(`/api/restaurants/${restaurantId}/reviews`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(reviewData)\n    })\n\n    if (response.ok) {\n        const newReview = await response.json();\n        dispatch(addReview(newReview));\n        return newReview;\n    }\n}\n\nexport const editReview = (reviewData, reviewId) => async (dispatch) => {\n    const response = await csrfFetch(`/api/reviews/${reviewId}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(reviewData)\n    })\n\n    if (response.ok) {\n        const review = await response.json();\n        dispatch(updateReview(review));\n        return review;\n    }\n}\n\nexport const deleteReview = (reviewId) => async (dispatch) => {\n    const response = await csrfFetch(`/api/reviews/${reviewId}`, {\n        method: 'DELETE'\n    })\n\n    if (response.ok) {\n        const message = await response.json();\n        dispatch(removeReview(reviewId));\n        return message;\n    }\n}\n\n/* -------------------------------- Reducer ------------------------- */\n\nconst initialState = {};\n\nconst reviewsReducer = (state = initialState, action) => {\n    let newState = {};\n    switch (action.type) {\n        case LOAD_ALL_RESTAURANT_REVIEWS:\n            // newState = { ...state };\n            action.reviews.forEach(review => {\n                newState[review.id] = review\n            })\n            return newState;\n\n        case LOAD_ALL_USER_REVIEWS:\n            // newState = { ...state }\n            newState = {};\n            action.reviews.forEach(review => {\n                newState[review.id] = review\n            })\n            return newState;\n\n        case ADD_REVIEW:\n            newState = { ...state };\n            newState[action.review.id] = action.review;\n            return newState;\n\n        case UPDATE_REVIEW:\n            newState = { ...state };\n            newState[action.review.id] = action.review;\n            return newState;\n\n        case DELETE_REVIEW:\n            newState = { ...state };\n            delete newState[action.reviewId];\n            return newState;\n\n        case RESET_REVIEWS:\n            newState = {};\n            return newState;\n\n        default:\n            return state;\n    }\n}\n\n\nexport default reviewsReducer;"],"mappings":"AAAA,OAASA,SAAS,KAAQ,QAAQ,CAGlC,2EAEA,KAAM,CAAAC,2BAA2B,CAAG,sCAAsC,CAC1E,KAAM,CAAAC,qBAAqB,CAAG,gCAAgC,CAC9D,KAAM,CAAAC,UAAU,CAAG,qBAAqB,CACxC,KAAM,CAAAC,aAAa,CAAG,wBAAwB,CAC9C,KAAM,CAAAC,aAAa,CAAG,wBAAwB,CAC9C,KAAM,CAAAC,aAAa,CAAG,wBAAwB,CAG9C,4EAEA,KAAM,CAAAC,wBAAwB,CAAIC,OAAO,EAAK,CAC1C,MAAO,CACHC,IAAI,CAAER,2BAA2B,CACjCO,OAAO,CAAEA,OACb,CAAC,CACL,CAAC,CAED,KAAM,CAAAE,kBAAkB,CAAIF,OAAO,EAAK,CACpC,MAAO,CACHC,IAAI,CAAEP,qBAAqB,CAC3BM,OAAO,CAAEA,OACb,CAAC,CACL,CAAC,CAED,KAAM,CAAAG,SAAS,CAAIC,MAAM,EAAK,CAC1B,MAAO,CACHH,IAAI,CAAEN,UAAU,CAChBS,MAAM,CAAEA,MACZ,CAAC,CACL,CAAC,CAED,KAAM,CAAAC,YAAY,CAAID,MAAM,EAAK,CAC7B,MAAO,CACHH,IAAI,CAAEL,aAAa,CACnBQ,MAAM,CAAEA,MACZ,CAAC,CACL,CAAC,CAED,KAAM,CAAAE,YAAY,CAAIC,QAAQ,EAAK,CAC/B,MAAO,CACHN,IAAI,CAAEJ,aAAa,CACnBU,QAAQ,CAAEA,QACd,CAAC,CACL,CAAC,CAED,MAAO,MAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CAC9B,MAAO,CACHP,IAAI,CAAEH,aACV,CAAC,CACL,CAAC,CAGD,gFAGA,MAAO,MAAM,CAAAW,uBAAuB,CAAIC,YAAY,EAAK,KAAO,CAAAC,QAAQ,EAAK,CACzE,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAApB,SAAS,CAAC,oBAAoBkB,YAAY,UAAU,CAAC,CAE5E,GAAIE,QAAQ,CAACC,EAAE,CAAE,CACb,KAAM,CAAAb,OAAO,CAAG,KAAM,CAAAY,QAAQ,CAACE,IAAI,CAAC,CAAC,CACrCH,QAAQ,CAACZ,wBAAwB,CAACC,OAAO,CAAC,CAAC,CAC3C,MAAO,CAAAA,OAAO,CAClB,CACJ,CAAE,MAAMe,CAAC,CAAE,CAEX,CACJ,CAAC,CAED,MAAO,MAAM,CAAAC,cAAc,CAAIC,MAAM,EAAK,KAAO,CAAAN,QAAQ,EAAK,CAC1D,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAApB,SAAS,CAAC,cAAcyB,MAAM,UAAU,CAAC,CAEhE,GAAIL,QAAQ,CAACC,EAAE,CAAE,CACb,KAAM,CAAAb,OAAO,CAAG,KAAM,CAAAY,QAAQ,CAACE,IAAI,CAAC,CAAC,CACrCH,QAAQ,CAACT,kBAAkB,CAACF,OAAO,CAAC,CAAC,CACrC,MAAO,CAAAA,OAAO,CAClB,CACJ,CAAE,MAAMe,CAAC,CAAE,CAEX,CACJ,CAAC,CAED,MAAO,MAAM,CAAAG,YAAY,CAAGA,CAACC,UAAU,CAAET,YAAY,GAAK,KAAO,CAAAC,QAAQ,EAAK,CAC1E,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAApB,SAAS,CAAC,oBAAoBkB,YAAY,UAAU,CAAE,CACzEU,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACL,UAAU,CACnC,CAAC,CAAC,CAEF,GAAIP,QAAQ,CAACC,EAAE,CAAE,CACb,KAAM,CAAAY,SAAS,CAAG,KAAM,CAAAb,QAAQ,CAACE,IAAI,CAAC,CAAC,CACvCH,QAAQ,CAACR,SAAS,CAACsB,SAAS,CAAC,CAAC,CAC9B,MAAO,CAAAA,SAAS,CACpB,CACJ,CAAC,CAED,MAAO,MAAM,CAAAC,UAAU,CAAGA,CAACP,UAAU,CAAEZ,QAAQ,GAAK,KAAO,CAAAI,QAAQ,EAAK,CACpE,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAApB,SAAS,CAAC,gBAAgBe,QAAQ,EAAE,CAAE,CACzDa,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACL,UAAU,CACnC,CAAC,CAAC,CAEF,GAAIP,QAAQ,CAACC,EAAE,CAAE,CACb,KAAM,CAAAT,MAAM,CAAG,KAAM,CAAAQ,QAAQ,CAACE,IAAI,CAAC,CAAC,CACpCH,QAAQ,CAACN,YAAY,CAACD,MAAM,CAAC,CAAC,CAC9B,MAAO,CAAAA,MAAM,CACjB,CACJ,CAAC,CAED,MAAO,MAAM,CAAAuB,YAAY,CAAIpB,QAAQ,EAAK,KAAO,CAAAI,QAAQ,EAAK,CAC1D,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAApB,SAAS,CAAC,gBAAgBe,QAAQ,EAAE,CAAE,CACzDa,MAAM,CAAE,QACZ,CAAC,CAAC,CAEF,GAAIR,QAAQ,CAACC,EAAE,CAAE,CACb,KAAM,CAAAe,OAAO,CAAG,KAAM,CAAAhB,QAAQ,CAACE,IAAI,CAAC,CAAC,CACrCH,QAAQ,CAACL,YAAY,CAACC,QAAQ,CAAC,CAAC,CAChC,MAAO,CAAAqB,OAAO,CAClB,CACJ,CAAC,CAED,wEAEA,KAAM,CAAAC,YAAY,CAAG,CAAC,CAAC,CAEvB,KAAM,CAAAC,cAAc,CAAG,QAAAA,CAAA,CAAkC,IAAjC,CAAAC,KAAK,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAGH,YAAY,IAAE,CAAAM,MAAM,CAAAH,SAAA,CAAAC,MAAA,GAAAD,SAAA,IAAAE,SAAA,CAChD,GAAI,CAAAE,QAAQ,CAAG,CAAC,CAAC,CACjB,OAAQD,MAAM,CAAClC,IAAI,EACf,IAAK,CAAAR,2BAA2B,CAC5B;AACA0C,MAAM,CAACnC,OAAO,CAACqC,OAAO,CAACjC,MAAM,EAAI,CAC7BgC,QAAQ,CAAChC,MAAM,CAACkC,EAAE,CAAC,CAAGlC,MAAM,CAChC,CAAC,CAAC,CACF,MAAO,CAAAgC,QAAQ,CAEnB,IAAK,CAAA1C,qBAAqB,CACtB;AACA0C,QAAQ,CAAG,CAAC,CAAC,CACbD,MAAM,CAACnC,OAAO,CAACqC,OAAO,CAACjC,MAAM,EAAI,CAC7BgC,QAAQ,CAAChC,MAAM,CAACkC,EAAE,CAAC,CAAGlC,MAAM,CAChC,CAAC,CAAC,CACF,MAAO,CAAAgC,QAAQ,CAEnB,IAAK,CAAAzC,UAAU,CACXyC,QAAQ,CAAG,CAAE,GAAGL,KAAM,CAAC,CACvBK,QAAQ,CAACD,MAAM,CAAC/B,MAAM,CAACkC,EAAE,CAAC,CAAGH,MAAM,CAAC/B,MAAM,CAC1C,MAAO,CAAAgC,QAAQ,CAEnB,IAAK,CAAAxC,aAAa,CACdwC,QAAQ,CAAG,CAAE,GAAGL,KAAM,CAAC,CACvBK,QAAQ,CAACD,MAAM,CAAC/B,MAAM,CAACkC,EAAE,CAAC,CAAGH,MAAM,CAAC/B,MAAM,CAC1C,MAAO,CAAAgC,QAAQ,CAEnB,IAAK,CAAAvC,aAAa,CACduC,QAAQ,CAAG,CAAE,GAAGL,KAAM,CAAC,CACvB,MAAO,CAAAK,QAAQ,CAACD,MAAM,CAAC5B,QAAQ,CAAC,CAChC,MAAO,CAAA6B,QAAQ,CAEnB,IAAK,CAAAtC,aAAa,CACdsC,QAAQ,CAAG,CAAC,CAAC,CACb,MAAO,CAAAA,QAAQ,CAEnB,QACI,MAAO,CAAAL,KAAK,CACpB,CACJ,CAAC,CAGD,cAAe,CAAAD,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module"}