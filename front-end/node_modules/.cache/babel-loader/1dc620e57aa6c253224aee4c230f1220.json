{"ast":null,"code":"import{useSelector,useDispatch}from\"react-redux\";import{useState}from\"react\";import{useHistory}from\"react-router-dom\";import{editReview}from'../../store/reviews';import{getOneRestaurant}from\"../../store/restaurants\";import downCaret from'../../icons/down-caret.ico';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function UpdateReviewForm(_ref){let{restaurant,review,setShowUpdateModal}=_ref;const dispatch=useDispatch();const history=useHistory();const sessionUser=useSelector(state=>state.session.user);const[reviewText,setReviewText]=useState(review.review);const[rating,setRating]=useState(review.rating.toString());const[validationErrors,setValidationErrors]=useState([]);const submitHandler=async e=>{e.preventDefault();const errors=[];if(!reviewText)errors.push(\"Please tell us about your experience\");if(reviewText.length>500)errors.push(\"Review can not exceed 500 characters\");if(!rating)errors.push(\"Please rate your experience\");setValidationErrors(errors);if(!errors.length){const reviewData={review:reviewText,rating:rating};await dispatch(editReview(reviewData,review.id));await dispatch(getOneRestaurant(restaurant.id));setShowUpdateModal({showModal:false,reviewId:0});history.push(`/restaurants/${restaurant.id}`);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"add-review-form-outer-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"review-form-heading\",children:[sessionUser.first_name,\", how was your experience at \",restaurant.name,\"?\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"create-review-form-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,className:\"create-review-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"update-review-validation-errors\",children:validationErrors.length>0&&validationErrors.map(error=>/*#__PURE__*/_jsx(\"div\",{children:error},error))}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-review-rating-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:downCaret,className:\"create-review-down-caret\"}),/*#__PURE__*/_jsxs(\"select\",{value:rating,onChange:e=>{setValidationErrors([]);setRating(e.target.value);},className:\"create-review-select red-star\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"\\u2605 \\u2605 \\u2605 \\u2605 \\u2605\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"\\u2605 \\u2605 \\u2605 \\u2605\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"\\u2605 \\u2605 \\u2605\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"\\u2605 \\u2605\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"\\u2605\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"review-inputs\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",onChange:e=>{setValidationErrors([]);setReviewText(e.target.value);},value:reviewText,placeholder:\"Review\",className:\"review-text-input\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"review-submit-button-container\",children:/*#__PURE__*/_jsx(\"button\",{disabled:!!validationErrors.length,className:\"submit-review-button\",children:\"Submit Review\"})})]})]})})]});}export default UpdateReviewForm;","map":{"version":3,"names":["useSelector","useDispatch","useState","useHistory","editReview","getOneRestaurant","downCaret","jsxs","_jsxs","jsx","_jsx","UpdateReviewForm","_ref","restaurant","review","setShowUpdateModal","dispatch","history","sessionUser","state","session","user","reviewText","setReviewText","rating","setRating","toString","validationErrors","setValidationErrors","submitHandler","e","preventDefault","errors","push","length","reviewData","id","showModal","reviewId","className","children","first_name","name","onSubmit","map","error","src","value","onChange","target","type","placeholder","disabled"],"sources":["/Users/rohan/Desktop/team-project-2024849-sprinters/front-end/src/components/Reviews/UpdateReviewForm.js"],"sourcesContent":["import { useSelector, useDispatch } from \"react-redux\";\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { editReview } from '../../store/reviews';\nimport { getOneRestaurant } from \"../../store/restaurants\";\nimport downCaret from '../../icons/down-caret.ico';\n\nfunction UpdateReviewForm({ restaurant, review, setShowUpdateModal }) {\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const sessionUser = useSelector(state => state.session.user);\n\n    const [reviewText, setReviewText] = useState(review.review);\n    const [rating, setRating] = useState(review.rating.toString());\n    const [validationErrors, setValidationErrors] = useState([]);\n\n    const submitHandler = async (e) => {\n        e.preventDefault();\n        const errors = [];\n\n        if (!reviewText) errors.push(\"Please tell us about your experience\");\n        if (reviewText.length > 500) errors.push(\"Review can not exceed 500 characters\");\n        if (!rating) errors.push(\"Please rate your experience\");\n\n        setValidationErrors(errors);\n\n        if (!errors.length) {\n\n            const reviewData = {\n                review: reviewText,\n                rating: rating\n            };\n\n            await dispatch(editReview(reviewData, review.id));\n            await dispatch(getOneRestaurant(restaurant.id));\n            setShowUpdateModal({ showModal: false, reviewId: 0 });\n            history.push(`/restaurants/${restaurant.id}`);\n        }\n    }\n\n    return (\n        <div className=\"add-review-form-outer-container\">\n            <div className=\"review-form-heading\">\n                {sessionUser.first_name}, how was your experience at {restaurant.name}?\n            </div>\n            <div className=\"create-review-form-container\">\n                <form onSubmit={submitHandler} className=\"create-review-form\">\n                    <div className=\"update-review-validation-errors\">\n                        {validationErrors.length > 0 &&\n                            validationErrors.map(error =>\n                                <div key={error}>{error}</div>\n                            )}\n                    </div>\n                    <div className=\"create-review-rating-container\">\n                    <img src={downCaret} className=\"create-review-down-caret\"/>\n\n                        <select\n                            value={rating}\n                            onChange={e => {\n                                setValidationErrors([])\n                                setRating(e.target.value)\n                            }}\n                            className=\"create-review-select red-star\">\n                            <option value=\"5\">★ ★ ★ ★ ★</option>\n                            <option value=\"4\">★ ★ ★ ★</option>\n                            <option value=\"3\">★ ★ ★</option>\n                            <option value=\"2\">★ ★</option>\n                            <option value=\"1\">★</option>\n                        </select>\n                    </div>\n                    <div className=\"review-inputs\">\n                        <div>\n                            <textarea\n                                type=\"text\"\n                                onChange={e => {\n                                    setValidationErrors([]);\n                                    setReviewText(e.target.value)\n                                }}\n                                value={reviewText}\n                                placeholder=\"Review\"\n                                className=\"review-text-input\" />\n                        </div>\n                        <div className=\"review-submit-button-container\">\n                            <button\n                                disabled={!!validationErrors.length}\n                                className=\"submit-review-button\">\n                                Submit Review\n                            </button>\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n    )\n}\n\n\n\nexport default UpdateReviewForm;"],"mappings":"AAAA,OAASA,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,QAAQ,KAAQ,OAAO,CAChC,OAASC,UAAU,KAAQ,kBAAkB,CAC7C,OAASC,UAAU,KAAQ,qBAAqB,CAChD,OAASC,gBAAgB,KAAQ,yBAAyB,CAC1D,MAAO,CAAAC,SAAS,KAAM,4BAA4B,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBAEnD,QAAS,CAAAC,gBAAgBA,CAAAC,IAAA,CAA6C,IAA5C,CAAEC,UAAU,CAAEC,MAAM,CAAEC,kBAAmB,CAAC,CAAAH,IAAA,CAChE,KAAM,CAAAI,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAgB,OAAO,CAAGd,UAAU,CAAC,CAAC,CAC5B,KAAM,CAAAe,WAAW,CAAGlB,WAAW,CAACmB,KAAK,EAAIA,KAAK,CAACC,OAAO,CAACC,IAAI,CAAC,CAE5D,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGrB,QAAQ,CAACY,MAAM,CAACA,MAAM,CAAC,CAC3D,KAAM,CAACU,MAAM,CAAEC,SAAS,CAAC,CAAGvB,QAAQ,CAACY,MAAM,CAACU,MAAM,CAACE,QAAQ,CAAC,CAAC,CAAC,CAC9D,KAAM,CAACC,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG1B,QAAQ,CAAC,EAAE,CAAC,CAE5D,KAAM,CAAA2B,aAAa,CAAG,KAAO,CAAAC,CAAC,EAAK,CAC/BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAC,MAAM,CAAG,EAAE,CAEjB,GAAI,CAACV,UAAU,CAAEU,MAAM,CAACC,IAAI,CAAC,sCAAsC,CAAC,CACpE,GAAIX,UAAU,CAACY,MAAM,CAAG,GAAG,CAAEF,MAAM,CAACC,IAAI,CAAC,sCAAsC,CAAC,CAChF,GAAI,CAACT,MAAM,CAAEQ,MAAM,CAACC,IAAI,CAAC,6BAA6B,CAAC,CAEvDL,mBAAmB,CAACI,MAAM,CAAC,CAE3B,GAAI,CAACA,MAAM,CAACE,MAAM,CAAE,CAEhB,KAAM,CAAAC,UAAU,CAAG,CACfrB,MAAM,CAAEQ,UAAU,CAClBE,MAAM,CAAEA,MACZ,CAAC,CAED,KAAM,CAAAR,QAAQ,CAACZ,UAAU,CAAC+B,UAAU,CAAErB,MAAM,CAACsB,EAAE,CAAC,CAAC,CACjD,KAAM,CAAApB,QAAQ,CAACX,gBAAgB,CAACQ,UAAU,CAACuB,EAAE,CAAC,CAAC,CAC/CrB,kBAAkB,CAAC,CAAEsB,SAAS,CAAE,KAAK,CAAEC,QAAQ,CAAE,CAAE,CAAC,CAAC,CACrDrB,OAAO,CAACgB,IAAI,CAAC,gBAAgBpB,UAAU,CAACuB,EAAE,EAAE,CAAC,CACjD,CACJ,CAAC,CAED,mBACI5B,KAAA,QAAK+B,SAAS,CAAC,iCAAiC,CAAAC,QAAA,eAC5ChC,KAAA,QAAK+B,SAAS,CAAC,qBAAqB,CAAAC,QAAA,EAC/BtB,WAAW,CAACuB,UAAU,CAAC,+BAA6B,CAAC5B,UAAU,CAAC6B,IAAI,CAAC,GAC1E,EAAK,CAAC,cACNhC,IAAA,QAAK6B,SAAS,CAAC,8BAA8B,CAAAC,QAAA,cACzChC,KAAA,SAAMmC,QAAQ,CAAEd,aAAc,CAACU,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACzD9B,IAAA,QAAK6B,SAAS,CAAC,iCAAiC,CAAAC,QAAA,CAC3Cb,gBAAgB,CAACO,MAAM,CAAG,CAAC,EACxBP,gBAAgB,CAACiB,GAAG,CAACC,KAAK,eACtBnC,IAAA,QAAA8B,QAAA,CAAkBK,KAAK,EAAbA,KAAmB,CACjC,CAAC,CACJ,CAAC,cACNrC,KAAA,QAAK+B,SAAS,CAAC,gCAAgC,CAAAC,QAAA,eAC/C9B,IAAA,QAAKoC,GAAG,CAAExC,SAAU,CAACiC,SAAS,CAAC,0BAA0B,CAAC,CAAC,cAEvD/B,KAAA,WACIuC,KAAK,CAAEvB,MAAO,CACdwB,QAAQ,CAAElB,CAAC,EAAI,CACXF,mBAAmB,CAAC,EAAE,CAAC,CACvBH,SAAS,CAACK,CAAC,CAACmB,MAAM,CAACF,KAAK,CAAC,CAC7B,CAAE,CACFR,SAAS,CAAC,+BAA+B,CAAAC,QAAA,eACzC9B,IAAA,WAAQqC,KAAK,CAAC,GAAG,CAAAP,QAAA,CAAC,oCAAS,CAAQ,CAAC,cACpC9B,IAAA,WAAQqC,KAAK,CAAC,GAAG,CAAAP,QAAA,CAAC,6BAAO,CAAQ,CAAC,cAClC9B,IAAA,WAAQqC,KAAK,CAAC,GAAG,CAAAP,QAAA,CAAC,sBAAK,CAAQ,CAAC,cAChC9B,IAAA,WAAQqC,KAAK,CAAC,GAAG,CAAAP,QAAA,CAAC,eAAG,CAAQ,CAAC,cAC9B9B,IAAA,WAAQqC,KAAK,CAAC,GAAG,CAAAP,QAAA,CAAC,QAAC,CAAQ,CAAC,EACxB,CAAC,EACR,CAAC,cACNhC,KAAA,QAAK+B,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC1B9B,IAAA,QAAA8B,QAAA,cACI9B,IAAA,aACIwC,IAAI,CAAC,MAAM,CACXF,QAAQ,CAAElB,CAAC,EAAI,CACXF,mBAAmB,CAAC,EAAE,CAAC,CACvBL,aAAa,CAACO,CAAC,CAACmB,MAAM,CAACF,KAAK,CAAC,CACjC,CAAE,CACFA,KAAK,CAAEzB,UAAW,CAClB6B,WAAW,CAAC,QAAQ,CACpBZ,SAAS,CAAC,mBAAmB,CAAE,CAAC,CACnC,CAAC,cACN7B,IAAA,QAAK6B,SAAS,CAAC,gCAAgC,CAAAC,QAAA,cAC3C9B,IAAA,WACI0C,QAAQ,CAAE,CAAC,CAACzB,gBAAgB,CAACO,MAAO,CACpCK,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,eAErC,CAAQ,CAAC,CACR,CAAC,EACL,CAAC,EACJ,CAAC,CACN,CAAC,EACL,CAAC,CAEd,CAIA,cAAe,CAAA7B,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module"}