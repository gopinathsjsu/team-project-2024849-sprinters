{"ast":null,"code":"import{useSelector,useDispatch}from\"react-redux\";import{useState}from\"react\";import{useHistory}from\"react-router-dom\";import{createReview}from\"../../store/reviews\";import{getOneRestaurant}from\"../../store/restaurants\";import downCaret from'../../icons/down-caret.ico';import'./AddReview.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function AddReviewForm(_ref){let{restaurant,setShowAddModal}=_ref;const dispatch=useDispatch();const history=useHistory();const sessionUser=useSelector(state=>state.session.user);const[review,setReview]=useState('');const[rating,setRating]=useState(5);const[validationErrors,setValidationErrors]=useState([]);const submitHandler=async e=>{e.preventDefault();const errors=[];if(!review)errors.push(\"Please tell us about your experience\");if(review.length>500)errors.push(\"Review can not exceed 500 characters\");if(!rating)errors.push(\"Please rate your experience\");setValidationErrors(errors);if(!errors.length){const reviewData={review:review,rating:rating};await dispatch(createReview(reviewData,restaurant.id));await dispatch(getOneRestaurant(restaurant.id));setShowAddModal(false);history.push(`/restaurants/${restaurant.id}`);}};if(!sessionUser)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"add-review-form-outer-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"review-form-heading\",children:[sessionUser.first_name,\", how was your experience at \",restaurant.name,\"?\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"create-review-form-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,className:\"create-review-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"review-validation-errors\",children:validationErrors.length>0&&validationErrors.map(error=>/*#__PURE__*/_jsx(\"div\",{children:error},error))}),/*#__PURE__*/_jsxs(\"div\",{className:\"create-review-rating-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:downCaret,className:\"create-review-down-caret\",alt:\"\"}),/*#__PURE__*/_jsxs(\"select\",{value:rating,onChange:e=>{setValidationErrors([]);setRating(e.target.value);},className:\"create-review-select red-star\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\"\\u2605 \\u2605 \\u2605 \\u2605 \\u2605\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"\\u2605 \\u2605 \\u2605 \\u2605\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"\\u2605 \\u2605 \\u2605\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"\\u2605 \\u2605\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"\\u2605\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"review-inputs\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",onChange:e=>{setValidationErrors([]);setReview(e.target.value);},value:review,placeholder:\"Review\",className:\"review-text-input\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"review-submit-button-container\",children:/*#__PURE__*/_jsx(\"button\",{disabled:!!validationErrors.length,className:\"submit-review-button\",children:\"Submit Review\"})})]})]})})]});}export default AddReviewForm;","map":{"version":3,"names":["useSelector","useDispatch","useState","useHistory","createReview","getOneRestaurant","downCaret","jsxs","_jsxs","jsx","_jsx","AddReviewForm","_ref","restaurant","setShowAddModal","dispatch","history","sessionUser","state","session","user","review","setReview","rating","setRating","validationErrors","setValidationErrors","submitHandler","e","preventDefault","errors","push","length","reviewData","id","className","children","first_name","name","onSubmit","map","error","src","alt","value","onChange","target","type","placeholder","disabled"],"sources":["/Users/rohan/Desktop/team-project-2024849-sprinters/front-end/src/components/Reviews/AddReview.js"],"sourcesContent":["import { useSelector, useDispatch } from \"react-redux\";\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { createReview } from \"../../store/reviews\";\nimport { getOneRestaurant } from \"../../store/restaurants\";\nimport downCaret from '../../icons/down-caret.ico';\nimport './AddReview.css';\n\n\nfunction AddReviewForm({ restaurant, setShowAddModal }) {\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const sessionUser = useSelector(state => state.session.user);\n\n    const [review, setReview] = useState('');\n    const [rating, setRating] = useState(5);\n    const [validationErrors, setValidationErrors] = useState([]);\n\n    const submitHandler = async (e) => {\n        e.preventDefault();\n        const errors = [];\n\n        if (!review) errors.push(\"Please tell us about your experience\");\n        if (review.length > 500) errors.push(\"Review can not exceed 500 characters\");\n        if (!rating) errors.push(\"Please rate your experience\");\n\n        setValidationErrors(errors);\n\n        if (!errors.length) {\n\n            const reviewData = {\n                review: review,\n                rating: rating\n            };\n\n            await dispatch(createReview(reviewData, restaurant.id));\n            await dispatch(getOneRestaurant(restaurant.id));\n            setShowAddModal(false);\n            history.push(`/restaurants/${restaurant.id}`);\n        }\n    }\n\n    if (!sessionUser) return null;\n\n\n    return (\n        <div className=\"add-review-form-outer-container\">\n            <div className=\"review-form-heading\">\n                {sessionUser.first_name}, how was your experience at {restaurant.name}?\n            </div>\n            <div className=\"create-review-form-container\">\n                <form onSubmit={submitHandler} className=\"create-review-form\">\n                    <div className=\"review-validation-errors\">\n                        {validationErrors.length > 0 &&\n                            validationErrors.map(error =>\n                                <div key={error}>{error}</div>\n                            )}\n                    </div>\n                    <div className=\"create-review-rating-container\">\n                        <img src={downCaret} className=\"create-review-down-caret\" alt=\"\"/>\n                        <select value={rating}\n                            onChange={e => {\n                                setValidationErrors([])\n                                setRating(e.target.value)\n                            }}\n                            className=\"create-review-select red-star\">\n                            <option value=\"5\">★ ★ ★ ★ ★</option>\n                            <option value=\"4\">★ ★ ★ ★</option>\n                            <option value=\"3\">★ ★ ★</option>\n                            <option value=\"2\">★ ★</option>\n                            <option value=\"1\">★</option>\n                        </select>\n                    </div>\n                    <div className=\"review-inputs\">\n                        <div>\n                            <textarea\n                                type=\"text\"\n                                onChange={e => {\n                                    setValidationErrors([]);\n                                    setReview(e.target.value)\n                                }}\n                                value={review}\n                                placeholder=\"Review\"\n                                className=\"review-text-input\" />\n                        </div>\n                        <div className=\"review-submit-button-container\">\n                            <button\n                                disabled={!!validationErrors.length}\n                                className=\"submit-review-button\">\n                                Submit Review\n                            </button>\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n    )\n}\n\n\n\nexport default AddReviewForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}