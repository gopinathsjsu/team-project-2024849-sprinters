{"ast":null,"code":"import React,{useState}from'react';import{useSelector,useDispatch}from'react-redux';import{Redirect}from'react-router-dom';import{signUp}from'../../store/session';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SignUpForm=_ref=>{let{setShowSignUpModal}=_ref;const dispatch=useDispatch();const user=useSelector(state=>state.session.user);const[username,setUsername]=useState('');const[email,setEmail]=useState('');const[firstName,setFirstName]=useState('');const[lastName,setLastName]=useState('');const[password,setPassword]=useState('');const[repeatPassword,setRepeatPassword]=useState('');const[validationErrors,setValidationErrors]=useState('');const[errors,setErrors]=useState([]);const onSignUp=async e=>{e.preventDefault();const errors=[];if(!username)errors.push(\"Please select a username\");if(username.length>20)errors.push(\"Please select a username less than 20 characters\");if(!email)errors.push(\"Please enter your email address\");if(email.includes(\"@\")!==true)errors.push(\"Please provide a valid email address\");if(!firstName)errors.push(\"Please enter your first name\");if(firstName.length>20)errors.push(\"First name must be less than 20 characters\");if(!lastName)errors.push(\"Please enter your last name\");if(lastName.length>20)errors.push(\"Last name must be less than 20 characters\");if(!password)errors.push(\"Please select a password\");if(!repeatPassword)errors.push(\"Please confirm your password\");setValidationErrors(errors);if(!errors.length){if(password===repeatPassword){const data=await dispatch(signUp(username,email,firstName,lastName,password));if(data){const backendErrors=[];data.forEach(error=>{let arr=error.split(': ');backendErrors.push(arr[1]);});setErrors(backendErrors);}else{setShowSignUpModal(false);}}else{errors.push(\"Please double check your confirm password.\");}}};const updateUsername=e=>{setValidationErrors([]);setUsername(e.target.value);};const updateEmail=e=>{setValidationErrors([]);setEmail(e.target.value);};const updateFirstName=e=>{setValidationErrors([]);setFirstName(e.target.value);};const updateLastName=e=>{setValidationErrors([]);setLastName(e.target.value);};const updatePassword=e=>{setValidationErrors([]);setPassword(e.target.value);};const updateRepeatPassword=e=>{setValidationErrors([]);setRepeatPassword(e.target.value);};if(user){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}return/*#__PURE__*/_jsx(\"form\",{onSubmit:onSignUp,children:/*#__PURE__*/_jsxs(\"div\",{className:\"sign-up-form-container\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome to ReserveTable\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[validationErrors.length>0&&validationErrors.map(error=>/*#__PURE__*/_jsx(\"div\",{children:error},error)),errors.map((error,ind)=>/*#__PURE__*/_jsx(\"div\",{children:error},ind))]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",onChange:updateUsername,value:username,placeholder:\"Username\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",onChange:updateEmail,value:email,placeholder:\"Email\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"first_name\",onChange:updateFirstName,value:firstName,placeholder:\"First name\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"last_name\",onChange:updateLastName,value:lastName,placeholder:\"Last name\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",onChange:updatePassword,value:password,placeholder:\"Password\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"repeat_password\",onChange:updateRepeatPassword,value:repeatPassword,placeholder:\"Confirm password\"// required={true}\n})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Sign Up\"})]})});};export default SignUpForm;","map":{"version":3,"names":["React","useState","useSelector","useDispatch","Redirect","signUp","jsx","_jsx","jsxs","_jsxs","SignUpForm","_ref","setShowSignUpModal","dispatch","user","state","session","username","setUsername","email","setEmail","firstName","setFirstName","lastName","setLastName","password","setPassword","repeatPassword","setRepeatPassword","validationErrors","setValidationErrors","errors","setErrors","onSignUp","e","preventDefault","push","length","includes","data","backendErrors","forEach","error","arr","split","updateUsername","target","value","updateEmail","updateFirstName","updateLastName","updatePassword","updateRepeatPassword","to","onSubmit","children","className","map","ind","type","name","onChange","placeholder"],"sources":["/Users/rohan/Desktop/team-project-2024849-sprinters/front-end/src/components/_auth/SignUpForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux'\nimport { Redirect } from 'react-router-dom';\nimport { signUp } from '../../store/session';\n\n\nconst SignUpForm = ({ setShowSignUpModal }) => {\n  const dispatch = useDispatch();\n  const user = useSelector(state => state.session.user);\n\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [firstName, setFirstName] = useState('');\n  const [lastName, setLastName] = useState('');\n  const [password, setPassword] = useState('');\n  const [repeatPassword, setRepeatPassword] = useState('');\n  const [validationErrors, setValidationErrors] = useState('');\n  const [errors, setErrors] = useState([]);\n\n  const onSignUp = async (e) => {\n    e.preventDefault();\n    const errors = [];\n\n    if (!username) errors.push(\"Please select a username\");\n    if (username.length > 20) errors.push(\"Please select a username less than 20 characters\");\n    if (!email) errors.push(\"Please enter your email address\");\n    if (email.includes(\"@\") !== true) errors.push(\"Please provide a valid email address\");\n    if (!firstName) errors.push(\"Please enter your first name\");\n    if (firstName.length > 20) errors.push(\"First name must be less than 20 characters\");\n    if (!lastName) errors.push(\"Please enter your last name\");\n    if (lastName.length > 20) errors.push(\"Last name must be less than 20 characters\");\n    if (!password) errors.push(\"Please select a password\");\n    if (!repeatPassword) errors.push(\"Please confirm your password\");\n\n    setValidationErrors(errors);\n\n    if (!errors.length) {\n      if (password === repeatPassword) {\n        const data = await dispatch(signUp(username, email, firstName, lastName, password));\n        if (data) {\n          const backendErrors = [];\n          data.forEach(error => {\n            let arr = error.split(': ');\n            backendErrors.push(arr[1])\n          })\n          setErrors(backendErrors)\n        } else {\n          setShowSignUpModal(false)\n        }\n      } else {\n        errors.push(\"Please double check your confirm password.\")\n      }\n    }\n  };\n\n  const updateUsername = (e) => {\n    setValidationErrors([]);\n    setUsername(e.target.value);\n  };\n\n  const updateEmail = (e) => {\n    setValidationErrors([]);\n    setEmail(e.target.value);\n  };\n\n  const updateFirstName = (e) => {\n    setValidationErrors([]);\n    setFirstName(e.target.value);\n  };\n\n  const updateLastName = (e) => {\n    setValidationErrors([]);\n    setLastName(e.target.value);\n  };\n\n  const updatePassword = (e) => {\n    setValidationErrors([]);\n    setPassword(e.target.value);\n  };\n\n  const updateRepeatPassword = (e) => {\n    setValidationErrors([]);\n    setRepeatPassword(e.target.value);\n  };\n\n  if (user) {\n    return <Redirect to='/' />;\n  }\n\n  return (\n    <form onSubmit={onSignUp} >\n      <div className=\"sign-up-form-container\">\n        <div>\n          <h1>Welcome to ReserveTable</h1>\n        </div>\n        <div >\n          {validationErrors.length > 0 &&\n            validationErrors.map(error =>\n              <div key={error}>{error}</div>\n            )}\n          {errors.map((error, ind) => (\n            <div key={ind}>{error}</div>\n          ))}\n        </div>\n        <div>\n          {/* <label>Username</label> */}\n          <input\n            type='text'\n            name='username'\n            onChange={updateUsername}\n            value={username}\n            placeholder=\"Username\"\n            \n          ></input>\n        </div>\n        <div>\n          {/* <label>Email</label> */}\n          <input\n            type='text'\n            name='email'\n            onChange={updateEmail}\n            value={email}\n            placeholder=\"Email\"\n            \n          ></input>\n        </div>\n        <div>\n          {/* <label>First name</label> */}\n          <input\n            type='text'\n            name='first_name'\n            onChange={updateFirstName}\n            value={firstName}\n            placeholder=\"First name\"\n          ></input>\n        </div>\n        <div>\n          {/* <label>Last name</label> */}\n          <input\n            type='text'\n            name='last_name'\n            onChange={updateLastName}\n            value={lastName}\n            placeholder=\"Last name\"\n            \n          ></input>\n        </div>\n        <div>\n          {/* <label>Password</label> */}\n          <input\n            type='password'\n            name='password'\n            onChange={updatePassword}\n            value={password}\n            placeholder=\"Password\"\n            \n          ></input>\n        </div>\n        <div>\n          {/* <label>Repeat Password</label> */}\n          <input\n            type='password'\n            name='repeat_password'\n            onChange={updateRepeatPassword}\n            value={repeatPassword}\n            placeholder=\"Confirm password\"\n            \n          // required={true}\n          ></input>\n        </div>\n        <button type='submit' >Sign Up</button>\n      </div>\n    </form>\n  );\n};\n\nexport default SignUpForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}