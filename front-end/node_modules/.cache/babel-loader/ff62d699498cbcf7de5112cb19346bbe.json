{"ast":null,"code":"var _jsxFileName = \"/Users/rohan/Desktop/team-project-2024849-sprinters/front-end/src/components/RestaurantManager/ManagerDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './ManagerDashboard.css';\nimport { FaPlus, FaClipboardList, FaUtensils } from 'react-icons/fa';\nimport { refreshAccessToken } from './authHelpers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ManagerDashboard = () => {\n  _s();\n  const history = useHistory();\n  const [managerName, setManagerName] = useState('');\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const managerId = localStorage.getItem('restaurantManagerId');\n    const token = localStorage.getItem('restaurantAccessToken');\n    if (!token || !managerId) {\n      history.push('/restaurant-manager/login');\n      return;\n    }\n    const fetchManagerData = async () => {\n      try {\n        const response = await fetch(`/api/restaurant-manager/${managerId}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        if (response.status === 401) {\n          const refreshed = await refreshAccessToken();\n          if (refreshed) {\n            const newToken = localStorage.getItem('restaurantAccessToken');\n            const retryResponse = await fetch(`/api/restaurant-manager/${managerId}`, {\n              headers: {\n                Authorization: `Bearer ${newToken}`\n              }\n            });\n            const retryData = await retryResponse.json();\n            setManagerName(retryData.name);\n            return;\n          } else {\n            return;\n          }\n        }\n        const data = await response.json();\n        setManagerName(data.name);\n      } catch (error) {\n        console.error('Error fetching manager data:', error);\n        history.push('/restaurant-manager/login');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchManagerData();\n  }, [history]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-page\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"dashboard-heading\",\n      children: [\"Welcome \", managerName, \"! \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 40\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 45\n      }, this), \"Let's help you manage your restaurants\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-card\",\n        onClick: () => history.push('/restaurant-manager/my-restaurants'),\n        children: [/*#__PURE__*/_jsxDEV(FaClipboardList, {\n          size: 40\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Show My Restaurants\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-card\",\n        onClick: () => history.push('/restaurant-manager/manage-restaurants'),\n        children: [/*#__PURE__*/_jsxDEV(FaPlus, {\n          size: 40\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Add/Manage Restaurant\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-card\",\n        onClick: () => history.push('/restaurant-manager/manage-menu'),\n        children: [/*#__PURE__*/_jsxDEV(FaUtensils, {\n          size: 40\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Add/Manage Menu\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n};\n_s(ManagerDashboard, \"y4JYw3sFTPZUcHCNUKTm33uGJq4=\", false, function () {\n  return [useHistory];\n});\n_c = ManagerDashboard;\nexport default ManagerDashboard;\nvar _c;\n$RefreshReg$(_c, \"ManagerDashboard\");","map":{"version":3,"names":["React","useEffect","useState","useHistory","FaPlus","FaClipboardList","FaUtensils","refreshAccessToken","jsxDEV","_jsxDEV","ManagerDashboard","_s","history","managerName","setManagerName","loading","setLoading","managerId","localStorage","getItem","token","push","fetchManagerData","response","fetch","headers","Authorization","status","refreshed","newToken","retryResponse","retryData","json","name","data","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","_c","$RefreshReg$"],"sources":["/Users/rohan/Desktop/team-project-2024849-sprinters/front-end/src/components/RestaurantManager/ManagerDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './ManagerDashboard.css';\nimport { FaPlus, FaClipboardList, FaUtensils } from 'react-icons/fa';\nimport { refreshAccessToken } from './authHelpers';\n\nconst ManagerDashboard = () => {\n    const history = useHistory();\n    const [managerName, setManagerName] = useState('');\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const managerId = localStorage.getItem('restaurantManagerId');\n        const token = localStorage.getItem('restaurantAccessToken');\n\n        if (!token || !managerId) {\n            history.push('/restaurant-manager/login');\n            return;\n        }\n\n        const fetchManagerData = async () => {\n            try {\n                const response = await fetch(`/api/restaurant-manager/${managerId}`, {\n                    headers: {\n                        Authorization: `Bearer ${token}`\n                    }\n                });\n\n                if (response.status === 401) {\n                    const refreshed = await refreshAccessToken();\n                    if (refreshed) {\n                        const newToken = localStorage.getItem('restaurantAccessToken');\n                        const retryResponse = await fetch(`/api/restaurant-manager/${managerId}`, {\n                            headers: { Authorization: `Bearer ${newToken}` }\n                        });\n                        const retryData = await retryResponse.json();\n                        setManagerName(retryData.name);\n                        return;\n                    } else {\n                        return;\n                    }\n                }\n\n                const data = await response.json();\n                setManagerName(data.name);\n            } catch (error) {\n                console.error('Error fetching manager data:', error);\n                history.push('/restaurant-manager/login');\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchManagerData();\n    }, [history]);\n\n    if (loading) {\n        return <div className=\"dashboard-page\">Loading...</div>;\n    }\n\n    return (\n        <div className=\"dashboard-page\">\n            <h1 className=\"dashboard-heading\">\n                Welcome {managerName}! <br/><br/>\n                Let's help you manage your restaurants\n            </h1>\n            <div className=\"dashboard-grid\">\n                <div className=\"dashboard-card\" onClick={() => history.push('/restaurant-manager/my-restaurants')}>\n                    <FaClipboardList size={40} />\n                    <p>Show My Restaurants</p>\n                </div>\n                <div className=\"dashboard-card\" onClick={() => history.push('/restaurant-manager/manage-restaurants')}>\n                    <FaPlus size={40} />\n                    <p>Add/Manage Restaurant</p>\n                </div>\n                <div className=\"dashboard-card\" onClick={() => history.push('/restaurant-manager/manage-menu')}>\n                    <FaUtensils size={40} />\n                    <p>Add/Manage Menu</p>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default ManagerDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}