{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useHistory}from'react-router-dom';import'./ManageRestaurants.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ManageRestaurants=()=>{const history=useHistory();const[restaurants,setRestaurants]=useState([]);const[loading,setLoading]=useState(true);const[showConfirm,setShowConfirm]=useState(false);const[restaurantToDelete,setRestaurantToDelete]=useState(null);useEffect(()=>{fetchRestaurants();},[]);const fetchRestaurants=async()=>{const token=localStorage.getItem('restaurantAccessToken');const response=await fetch('/api/restaurant-manager/manage-restaurants',{headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();setRestaurants(data);setLoading(false);};const confirmDelete=id=>{setRestaurantToDelete(id);setShowConfirm(true);};const handleDelete=async()=>{const token=localStorage.getItem('restaurantAccessToken');const res=await fetch(`/api/restaurant/${restaurantToDelete}`,{method:'DELETE',headers:{'Authorization':`Bearer ${token}`}});if(res.ok){fetchRestaurants();// refresh list\nsetShowConfirm(false);setRestaurantToDelete(null);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"manage-restaurants-page\",children:\"Loading...\"});return/*#__PURE__*/_jsx(\"div\",{className:\"manage-restaurants-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"manage-restaurants-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-section\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Your Restaurants\"})}),/*#__PURE__*/_jsxs(\"table\",{className:\"restaurant-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Restaurant Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Location\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:restaurants.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",children:\"No restaurants yet.\"})}):restaurants.map(rest=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:rest.name}),/*#__PURE__*/_jsx(\"td\",{children:rest.location||rest.neighborhood}),/*#__PURE__*/_jsx(\"td\",{children:rest.status}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"edit-btn\",onClick:()=>history.push(`/restaurant-manager/edit-restaurant/${rest.id}`),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:()=>confirmDelete(rest.id),children:\"Delete\"})]})]},rest.id))})]}),/*#__PURE__*/_jsx(\"button\",{className:\"add-restaurant-btn\",onClick:()=>history.push('/restaurant-manager/add-restaurant'),children:\"Add Restaurant\"}),showConfirm&&/*#__PURE__*/_jsx(\"div\",{className:\"confirm-modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Confirm Delete\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you want to delete this restaurant?\"}),/*#__PURE__*/_jsx(\"button\",{className:\"confirm-btn\",onClick:handleDelete,children:\"Yes, Delete\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel-btn\",onClick:()=>setShowConfirm(false),children:\"Cancel\"})]})})]})});};export default ManageRestaurants;","map":{"version":3,"names":["React","useEffect","useState","useHistory","jsx","_jsx","jsxs","_jsxs","ManageRestaurants","history","restaurants","setRestaurants","loading","setLoading","showConfirm","setShowConfirm","restaurantToDelete","setRestaurantToDelete","fetchRestaurants","token","localStorage","getItem","response","fetch","headers","data","json","confirmDelete","id","handleDelete","res","method","ok","className","children","length","colSpan","map","rest","name","location","neighborhood","status","onClick","push"],"sources":["/Users/rohan/Desktop/team-project-2024849-sprinters/front-end/src/components/RestaurantManager/ManageRestaurants.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport './ManageRestaurants.css';\n\nconst ManageRestaurants = () => {\n    const history = useHistory();\n    const [restaurants, setRestaurants] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [showConfirm, setShowConfirm] = useState(false);\n    const [restaurantToDelete, setRestaurantToDelete] = useState(null);\n\n    useEffect(() => {\n        fetchRestaurants();\n    }, []);\n\n    const fetchRestaurants = async () => {\n        const token = localStorage.getItem('restaurantAccessToken');\n\n        const response = await fetch('/api/restaurant-manager/manage-restaurants', {\n            headers: { 'Authorization': `Bearer ${token}` }\n        });\n\n        const data = await response.json();\n        setRestaurants(data);\n        setLoading(false);\n    };\n\n    const confirmDelete = (id) => {\n        setRestaurantToDelete(id);\n        setShowConfirm(true);\n    };\n\n    const handleDelete = async () => {\n        const token = localStorage.getItem('restaurantAccessToken');\n\n        const res = await fetch(`/api/restaurant/${restaurantToDelete}`, {\n            method: 'DELETE',\n            headers: { 'Authorization': `Bearer ${token}` }\n        });\n\n        if (res.ok) {\n            fetchRestaurants(); // refresh list\n            setShowConfirm(false);\n            setRestaurantToDelete(null);\n        }\n    };\n\n    if (loading) return <div className=\"manage-restaurants-page\">Loading...</div>;\n\n    return (\n        <div className=\"manage-restaurants-wrapper\">\n\n            <div className=\"manage-restaurants-page\">\n                <div className=\"header-section\">\n                    <h2>Your Restaurants</h2>\n\n                </div>\n\n                <table className=\"restaurant-table\">\n                    <thead>\n                    <tr>\n                        <th>Restaurant Name</th>\n                        <th>Location</th>\n                        <th>Status</th>\n                        <th>Actions</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {restaurants.length === 0 ? (\n                        <tr><td colSpan=\"4\">No restaurants yet.</td></tr>\n                    ) : (\n                        restaurants.map((rest) => (\n                            <tr key={rest.id}>\n                                <td>{rest.name}</td>\n                                <td>{rest.location || rest.neighborhood}</td>\n                                <td>{rest.status}</td>\n                                <td>\n                                    <button className=\"edit-btn\" onClick={() => history.push(`/restaurant-manager/edit-restaurant/${rest.id}`)}>Edit</button>\n                                    <button className=\"delete-btn\" onClick={() => confirmDelete(rest.id)}>Delete</button>\n                                </td>\n                            </tr>\n                        ))\n                    )}\n                    </tbody>\n                </table>\n\n                <button className=\"add-restaurant-btn\" onClick={() => history.push('/restaurant-manager/add-restaurant')}>\n                    Add Restaurant\n                </button>\n\n                {showConfirm && (\n                    <div className=\"confirm-modal\">\n                        <div className=\"confirm-box\">\n                            <h3>Confirm Delete</h3>\n                            <p>Are you sure you want to delete this restaurant?</p>\n                            <button className=\"confirm-btn\" onClick={handleDelete}>Yes, Delete</button>\n                            <button className=\"cancel-btn\" onClick={() => setShowConfirm(false)}>Cancel</button>\n                        </div>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default ManageRestaurants;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}