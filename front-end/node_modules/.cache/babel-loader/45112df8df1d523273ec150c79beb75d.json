{"ast":null,"code":"var _jsxFileName = \"/Users/akshashe/Documents/Projects/team-project-2024849-sprinters/front-end/src/components/Reviews/UpdateReviewForm.js\",\n  _s = $RefreshSig$();\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { editReview } from '../../store/reviews';\nimport { getOneRestaurant } from \"../../store/restaurants\";\nimport downCaret from '../../icons/down-caret.ico';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UpdateReviewForm({\n  restaurant,\n  review,\n  setShowUpdateModal\n}) {\n  _s();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const sessionUser = useSelector(state => state.session.user);\n  const [reviewText, setReviewText] = useState(review.review);\n  const [rating, setRating] = useState(review.rating.toString());\n  const [validationErrors, setValidationErrors] = useState([]);\n  const submitHandler = async e => {\n    e.preventDefault();\n    const errors = [];\n    if (!reviewText) errors.push(\"Please tell us about your experience\");\n    if (reviewText.length > 500) errors.push(\"Review can not exceed 500 characters\");\n    if (!rating) errors.push(\"Please rate your experience\");\n    setValidationErrors(errors);\n    if (!errors.length) {\n      const reviewData = {\n        review: reviewText,\n        rating: rating\n      };\n      await dispatch(editReview(reviewData, review.id));\n      await dispatch(getOneRestaurant(restaurant.id));\n      setShowUpdateModal({\n        showModal: false,\n        reviewId: 0\n      });\n      history.push(`/restaurants/${restaurant.id}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"add-review-form-outer-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"review-form-heading\",\n      children: [sessionUser.first_name, \", how was your experience at \", restaurant.name, \"?\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"create-review-form-container\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: submitHandler,\n        className: \"create-review-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"update-review-validation-errors\",\n          children: validationErrors.length > 0 && validationErrors.map(error => /*#__PURE__*/_jsxDEV(\"div\", {\n            children: error\n          }, error, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"create-review-rating-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: downCaret,\n            className: \"create-review-down-caret\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: rating,\n            onChange: e => {\n              setValidationErrors([]);\n              setRating(e.target.value);\n            },\n            className: \"create-review-select red-star\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"5\",\n              children: \"\\u2605 \\u2605 \\u2605 \\u2605 \\u2605\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"4\",\n              children: \"\\u2605 \\u2605 \\u2605 \\u2605\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"3\",\n              children: \"\\u2605 \\u2605 \\u2605\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"2\",\n              children: \"\\u2605 \\u2605\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"1\",\n              children: \"\\u2605\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"review-inputs\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              type: \"text\",\n              onChange: e => {\n                setValidationErrors([]);\n                setReviewText(e.target.value);\n              },\n              value: reviewText,\n              placeholder: \"Review\",\n              className: \"review-text-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"review-submit-button-container\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              disabled: !!validationErrors.length,\n              className: \"submit-review-button\",\n              children: \"Submit Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n}\n_s(UpdateReviewForm, \"QNwvOf0l/5AXx32Jg3h9Vktk8yY=\", false, function () {\n  return [useDispatch, useHistory, useSelector];\n});\n_c = UpdateReviewForm;\nexport default UpdateReviewForm;\nvar _c;\n$RefreshReg$(_c, \"UpdateReviewForm\");","map":{"version":3,"names":["useSelector","useDispatch","useState","useHistory","editReview","getOneRestaurant","downCaret","jsxDEV","_jsxDEV","UpdateReviewForm","restaurant","review","setShowUpdateModal","_s","dispatch","history","sessionUser","state","session","user","reviewText","setReviewText","rating","setRating","toString","validationErrors","setValidationErrors","submitHandler","e","preventDefault","errors","push","length","reviewData","id","showModal","reviewId","className","children","first_name","name","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","map","error","src","value","onChange","target","type","placeholder","disabled","_c","$RefreshReg$"],"sources":["/Users/akshashe/Documents/Projects/team-project-2024849-sprinters/front-end/src/components/Reviews/UpdateReviewForm.js"],"sourcesContent":["import { useSelector, useDispatch } from \"react-redux\";\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { editReview } from '../../store/reviews';\nimport { getOneRestaurant } from \"../../store/restaurants\";\nimport downCaret from '../../icons/down-caret.ico';\n\nfunction UpdateReviewForm({ restaurant, review, setShowUpdateModal }) {\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const sessionUser = useSelector(state => state.session.user);\n\n    const [reviewText, setReviewText] = useState(review.review);\n    const [rating, setRating] = useState(review.rating.toString());\n    const [validationErrors, setValidationErrors] = useState([]);\n\n    const submitHandler = async (e) => {\n        e.preventDefault();\n        const errors = [];\n\n        if (!reviewText) errors.push(\"Please tell us about your experience\");\n        if (reviewText.length > 500) errors.push(\"Review can not exceed 500 characters\");\n        if (!rating) errors.push(\"Please rate your experience\");\n\n        setValidationErrors(errors);\n\n        if (!errors.length) {\n\n            const reviewData = {\n                review: reviewText,\n                rating: rating\n            };\n\n            await dispatch(editReview(reviewData, review.id));\n            await dispatch(getOneRestaurant(restaurant.id));\n            setShowUpdateModal({ showModal: false, reviewId: 0 });\n            history.push(`/restaurants/${restaurant.id}`);\n        }\n    }\n\n    return (\n        <div className=\"add-review-form-outer-container\">\n            <div className=\"review-form-heading\">\n                {sessionUser.first_name}, how was your experience at {restaurant.name}?\n            </div>\n            <div className=\"create-review-form-container\">\n                <form onSubmit={submitHandler} className=\"create-review-form\">\n                    <div className=\"update-review-validation-errors\">\n                        {validationErrors.length > 0 &&\n                            validationErrors.map(error =>\n                                <div key={error}>{error}</div>\n                            )}\n                    </div>\n                    <div className=\"create-review-rating-container\">\n                    <img src={downCaret} className=\"create-review-down-caret\"/>\n\n                        <select\n                            value={rating}\n                            onChange={e => {\n                                setValidationErrors([])\n                                setRating(e.target.value)\n                            }}\n                            className=\"create-review-select red-star\">\n                            <option value=\"5\">★ ★ ★ ★ ★</option>\n                            <option value=\"4\">★ ★ ★ ★</option>\n                            <option value=\"3\">★ ★ ★</option>\n                            <option value=\"2\">★ ★</option>\n                            <option value=\"1\">★</option>\n                        </select>\n                    </div>\n                    <div className=\"review-inputs\">\n                        <div>\n                            <textarea\n                                type=\"text\"\n                                onChange={e => {\n                                    setValidationErrors([]);\n                                    setReviewText(e.target.value)\n                                }}\n                                value={reviewText}\n                                placeholder=\"Review\"\n                                className=\"review-text-input\" />\n                        </div>\n                        <div className=\"review-submit-button-container\">\n                            <button\n                                disabled={!!validationErrors.length}\n                                className=\"submit-review-button\">\n                                Submit Review\n                            </button>\n                        </div>\n                    </div>\n                </form>\n            </div>\n        </div>\n    )\n}\n\n\n\nexport default UpdateReviewForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}