{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useHistory,useParams}from'react-router-dom';import'./AddEditRestaurantForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditRestaurantForm=()=>{const{id}=useParams();const history=useHistory();const[formData,setFormData]=useState(null);const[message,setMessage]=useState('');const expectedFields=['name','neighborhood','cuisines','cost','operation_hours','dining_style','dress_code','parking_details','payment_options','cross_street','phone','executive_chef','description','website','preview_img'];useEffect(()=>{const token=localStorage.getItem('restaurantAccessToken');fetch(`/api/restaurant/${id}`,{headers:{'Authorization':`Bearer ${token}`}}).then(res=>res.json()).then(data=>{const filteredData={};expectedFields.forEach(field=>{filteredData[field]=data[field]||'';});setFormData(filteredData);}).catch(()=>history.push('/restaurant-manager/manage-restaurants'));},[id,history]);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();const token=localStorage.getItem('restaurantAccessToken');const response=await fetch(`/api/restaurant/${id}`,{method:'PUT',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`},body:JSON.stringify(formData)});if(response.ok){setMessage('Restaurant updated successfully!');setTimeout(()=>history.push('/restaurant-manager/manage-restaurants'),1000);}else{setMessage('Failed to update restaurant.');}};if(!formData)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"add-edit-restaurant-form-page\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"add-edit-restaurant-heading\",children:\" Edit Restaurant\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"add-edit-restaurant-form\",onSubmit:handleSubmit,children:[expectedFields.map(key=>/*#__PURE__*/_jsxs(\"div\",{className:\"form-group-left\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[key.replace(/_/g,' ').replace(/\\b\\w/g,l=>l.toUpperCase()),\":\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:key,value:formData[key]||'',onChange:handleChange,required:key!=='executive_chef'})]},key)),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save Changes\"}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"form-message\",children:message})]})]});};export default EditRestaurantForm;","map":{"version":3,"names":["React","useEffect","useState","useHistory","useParams","jsx","_jsx","jsxs","_jsxs","EditRestaurantForm","id","history","formData","setFormData","message","setMessage","expectedFields","token","localStorage","getItem","fetch","headers","then","res","json","data","filteredData","forEach","field","catch","push","handleChange","e","target","name","value","handleSubmit","preventDefault","response","method","body","JSON","stringify","ok","setTimeout","children","className","onSubmit","map","key","replace","l","toUpperCase","type","onChange","required"],"sources":["/Users/rohan/Desktop/team-project-2024849-sprinters/front-end/src/components/RestaurantManager/EditRestaurantForm.js"],"sourcesContent":["\nimport React, { useEffect, useState } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport './AddEditRestaurantForm.css';\n\nconst EditRestaurantForm = () => {\n    const { id } = useParams();\n    const history = useHistory();\n    const [formData, setFormData] = useState(null);\n    const [message, setMessage] = useState('');\n\n    const expectedFields = [\n        'name', 'neighborhood', 'cuisines', 'cost',\n        'operation_hours', 'dining_style', 'dress_code',\n        'parking_details', 'payment_options', 'cross_street',\n        'phone', 'executive_chef', 'description', 'website', 'preview_img'\n    ];\n\n    useEffect(() => {\n        const token = localStorage.getItem('restaurantAccessToken');\n\n        fetch(`/api/restaurant/${id}`, {\n            headers: {\n                'Authorization': `Bearer ${token}`\n            }\n        })\n            .then(res => res.json())\n            .then(data => {\n                const filteredData = {};\n                expectedFields.forEach(field => {\n                    filteredData[field] = data[field] || '';\n                });\n                setFormData(filteredData);\n            })\n            .catch(() => history.push('/restaurant-manager/manage-restaurants'));\n    }, [id, history]);\n\n    const handleChange = (e) => {\n        setFormData({ ...formData, [e.target.name]: e.target.value });\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        const token = localStorage.getItem('restaurantAccessToken');\n\n        const response = await fetch(`/api/restaurant/${id}`, {\n            method: 'PUT',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            },\n            body: JSON.stringify(formData)\n        });\n\n        if (response.ok) {\n            setMessage('Restaurant updated successfully!');\n            setTimeout(() => history.push('/restaurant-manager/manage-restaurants'), 1000);\n        } else {\n            setMessage('Failed to update restaurant.');\n        }\n    };\n\n    if (!formData) return <p>Loading...</p>;\n\n    return (\n        <div className=\"add-edit-restaurant-form-page\">\n            <h1 className=\"add-edit-restaurant-heading\"> Edit Restaurant</h1>\n            <form className=\"add-edit-restaurant-form\" onSubmit={handleSubmit}>\n                {expectedFields.map((key) => (\n                    <div className=\"form-group-left\" key={key}>\n                        <label className=\"form-label\">{key.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}:</label>\n                        <input\n                            type=\"text\"\n                            name={key}\n                            value={formData[key] || ''}\n                            onChange={handleChange}\n                            required={key !== 'executive_chef'}\n                        />\n                    </div>\n                ))}\n                <button type=\"submit\">Save Changes</button>\n                {message && <p className=\"form-message\">{message}</p>}\n            </form>\n        </div>\n    );\n};\n\nexport default EditRestaurantForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}