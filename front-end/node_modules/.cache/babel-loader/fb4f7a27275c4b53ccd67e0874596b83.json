{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{Modal}from'../../context/Modal';import{getAllUserReservations}from'../../store/reservations';import LoginForm from'../_auth/LoginForm';import SignUpForm from'../_auth/SignUpForm';import profileButton from'../../icons/profile-button.ico';import upcomingReservations from'../../icons/upcoming-reservations-icon.ico';import notifications from'../../icons/notification-icon.ico';import lineBreak from'../../icons/line-break.png';import magnifyingGlass from'../../icons/search-button.ico';import ProfileButtonMenu from'./ProfileButtonMenu';import UpcomingReservationsMenu from'../Reservations/UpcomingReservationsMenu';import upcomingReservationsNotification from'../../icons/upcoming-reservation-w-notification.ico';import dayjs from'dayjs';import'./NavigationMenu.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function NavigationMenu(_ref){let{showSignInModal,setShowSignInModal}=_ref;const dispatch=useDispatch();const sessionUser=useSelector(state=>state.session.user);const allReservations=useSelector(state=>Object.values(state.reservations));const futureReservations=allReservations.filter(reservation=>dayjs().isBefore(reservation.reservation_time));// const [showSignInModal, setShowSignInModal] = useState(false);\nconst[showSignUpModal,setShowSignUpModal]=useState(false);const[showMenu,setShowMenu]=useState(false);const[showReservationsMenu,setShowReservationsMenu]=useState(false);const openSignIn=()=>{if(showSignInModal)return;setShowSignInModal(true);};const openSignUp=()=>{if(showSignUpModal)return;setShowSignUpModal(true);};const openMenu=()=>{if(showMenu)return;setShowMenu(true);};const closeMenu=()=>{setShowMenu(false);};const openReservationsMenu=()=>{setShowReservationsMenu(true);};const closeReservationsMenu=()=>{setShowReservationsMenu(false);};useEffect(()=>{if(!showMenu)return;document.addEventListener('click',closeMenu);return()=>document.removeEventListener(\"click\",closeMenu);},[showMenu]);useEffect(()=>{if(!showReservationsMenu)return;document.addEventListener('click',closeReservationsMenu);return()=>document.removeEventListener('click',closeReservationsMenu);},[showReservationsMenu]);useEffect(()=>{if(sessionUser){dispatch(getAllUserReservations(sessionUser.id));}},[dispatch,sessionUser]);return/*#__PURE__*/_jsx(\"div\",{className:\"navigation-menu\",children:sessionUser?/*#__PURE__*/_jsxs(\"div\",{className:\"nav-bar-menu-items\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"profile-button\",onClick:openMenu,children:/*#__PURE__*/_jsx(\"img\",{src:profileButton,className:\"profile-button-icon\",alt:\"\"})}),showMenu&&/*#__PURE__*/_jsx(ProfileButtonMenu,{setShowSignInModal:setShowSignInModal}),/*#__PURE__*/_jsx(\"button\",{className:\"upcoming-reservations-menu-button\",onClick:openReservationsMenu,children:futureReservations.length>0?/*#__PURE__*/_jsx(\"img\",{src:upcomingReservationsNotification,alt:\"\",className:\"upcoming-reservations-notification-icon\"}):/*#__PURE__*/_jsx(\"img\",{src:upcomingReservations,alt:\"\",className:\"upcoming-reservations-icon\"})}),showReservationsMenu&&/*#__PURE__*/_jsx(UpcomingReservationsMenu,{}),/*#__PURE__*/_jsx(\"img\",{src:notifications,className:\"notifications-icon\",alt:\"\"}),/*#__PURE__*/_jsx(\"img\",{src:lineBreak,className:\"line-break\",alt:\"\"}),/*#__PURE__*/_jsx(\"img\",{src:magnifyingGlass,className:\"logged-in-search-button\",alt:\"\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"sign-in-menu-items\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"sign-up-button\",onClick:openSignUp,children:[\"Sign up\",showSignUpModal&&/*#__PURE__*/_jsx(Modal,{onClose:()=>setShowSignUpModal(false),children:/*#__PURE__*/_jsx(SignUpForm,{setShowSignUpModal:setShowSignUpModal})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{className:\"sign-in-button\",onClick:openSignIn,children:[\"Sign in\",showSignInModal&&/*#__PURE__*/_jsx(Modal,{onClose:()=>setShowSignInModal(false),children:/*#__PURE__*/_jsx(LoginForm,{setShowSignInModal:setShowSignInModal})})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:magnifyingGlass,className:\"logged-out-search-button\",alt:\"\"})})]})});}export default NavigationMenu;","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","Modal","getAllUserReservations","LoginForm","SignUpForm","profileButton","upcomingReservations","notifications","lineBreak","magnifyingGlass","ProfileButtonMenu","UpcomingReservationsMenu","upcomingReservationsNotification","dayjs","jsx","_jsx","jsxs","_jsxs","NavigationMenu","_ref","showSignInModal","setShowSignInModal","dispatch","sessionUser","state","session","user","allReservations","Object","values","reservations","futureReservations","filter","reservation","isBefore","reservation_time","showSignUpModal","setShowSignUpModal","showMenu","setShowMenu","showReservationsMenu","setShowReservationsMenu","openSignIn","openSignUp","openMenu","closeMenu","openReservationsMenu","closeReservationsMenu","document","addEventListener","removeEventListener","id","className","children","onClick","src","alt","length","onClose"],"sources":["/Users/rohan/Desktop/team-project-2024849-sprinters/front-end/src/components/Navigation/NavigationMenu.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Modal } from '../../context/Modal';\nimport { getAllUserReservations } from '../../store/reservations';\nimport LoginForm from '../_auth/LoginForm';\nimport SignUpForm from '../_auth/SignUpForm';\nimport profileButton from '../../icons/profile-button.ico';\nimport upcomingReservations from '../../icons/upcoming-reservations-icon.ico';\nimport notifications from '../../icons/notification-icon.ico';\nimport lineBreak from '../../icons/line-break.png';\nimport magnifyingGlass from '../../icons/search-button.ico';\nimport ProfileButtonMenu from './ProfileButtonMenu';\nimport UpcomingReservationsMenu from '../Reservations/UpcomingReservationsMenu';\nimport upcomingReservationsNotification from '../../icons/upcoming-reservation-w-notification.ico';\nimport dayjs from 'dayjs';\nimport './NavigationMenu.css'\n\n\nfunction NavigationMenu({ showSignInModal, setShowSignInModal }) {\n    const dispatch = useDispatch();\n    const sessionUser = useSelector(state => state.session.user);\n    const allReservations = useSelector(state => Object.values(state.reservations));\n    const futureReservations = allReservations.filter(reservation => dayjs().isBefore(reservation.reservation_time));\n\n    // const [showSignInModal, setShowSignInModal] = useState(false);\n    const [showSignUpModal, setShowSignUpModal] = useState(false);\n    const [showMenu, setShowMenu] = useState(false);\n    const [showReservationsMenu, setShowReservationsMenu] = useState(false);\n\n    const openSignIn = () => {\n        if (showSignInModal) return;\n        setShowSignInModal(true)\n    }\n\n    const openSignUp = () => {\n        if (showSignUpModal) return;\n        setShowSignUpModal(true)\n    }\n\n    const openMenu = () => {\n        if (showMenu) return;\n        setShowMenu(true);\n    }\n\n    const closeMenu = () => {\n        setShowMenu(false);\n    }\n\n    const openReservationsMenu = () => {\n        setShowReservationsMenu(true);\n    }\n\n    const closeReservationsMenu = () => {\n        setShowReservationsMenu(false);\n    }\n\n    useEffect(() => {\n        if (!showMenu) return;\n        document.addEventListener('click', closeMenu);\n        return () => document.removeEventListener(\"click\", closeMenu);\n    }, [showMenu]);\n\n    useEffect(() => {\n        if (!showReservationsMenu) return;\n        document.addEventListener('click', closeReservationsMenu);\n        return () => document.removeEventListener('click', closeReservationsMenu);\n    }, [showReservationsMenu]);\n\n    useEffect(() => {\n        if (sessionUser) {\n            dispatch(getAllUserReservations(sessionUser.id));\n        }\n    }, [dispatch, sessionUser])\n\n\n\n    return (\n        <div className=\"navigation-menu\">\n            {\n                sessionUser\n                    ?\n                    <div className=\"nav-bar-menu-items\">\n                        <button className=\"profile-button\" onClick={openMenu}>\n                            <img src={profileButton} className=\"profile-button-icon\" alt=\"\" />\n                        </button>\n                        {showMenu && (\n                            <ProfileButtonMenu setShowSignInModal={setShowSignInModal} />\n                        )}\n                        <button className=\"upcoming-reservations-menu-button\" onClick={openReservationsMenu}>\n                            {futureReservations.length > 0\n                                ?\n                                <img src={upcomingReservationsNotification} alt=\"\" className=\"upcoming-reservations-notification-icon\" />\n                                :\n                                <img src={upcomingReservations} alt=\"\" className=\"upcoming-reservations-icon\" />\n                            }\n                        </button>\n                        {showReservationsMenu && (\n                            <UpcomingReservationsMenu />\n                        )}\n                        <img src={notifications} className=\"notifications-icon\" alt=\"\" />\n                        <img src={lineBreak} className=\"line-break\" alt=\"\" />\n                        <img src={magnifyingGlass} className=\"logged-in-search-button\" alt=\"\" />\n                    </div>\n                    :\n                    <div className=\"sign-in-menu-items\">\n                        <button className=\"sign-up-button\" onClick={openSignUp}>\n                            Sign up\n                            {showSignUpModal && (\n                                <Modal onClose={() => setShowSignUpModal(false)}>\n                                    <SignUpForm setShowSignUpModal={setShowSignUpModal} />\n                                </Modal>\n                            )}\n                        </button>\n                        <div>\n                            <button className=\"sign-in-button\" onClick={openSignIn}>\n                                Sign in\n                                {showSignInModal && (\n                                    <Modal onClose={() => setShowSignInModal(false)}>\n                                        <LoginForm setShowSignInModal={setShowSignInModal} />\n                                    </Modal>\n                                )}\n                            </button>\n                        </div>\n                        <div>\n                            <img src={magnifyingGlass} className=\"logged-out-search-button\" alt=\"\" />\n                        </div>\n                    </div>\n            }\n        </div>\n    )\n}\n\n\nexport default NavigationMenu;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}