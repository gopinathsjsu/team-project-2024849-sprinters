{"ast":null,"code":"/* ------------------------------ Action Types -------------------------- */\n\nconst SET_USER = 'session/SET_USER';\nconst REMOVE_USER = 'session/REMOVE_USER';\n\n/* ---------------------------- Action Creators -------------------------- */\n\nconst setUser = user => ({\n  type: SET_USER,\n  payload: user\n});\nconst removeUser = () => ({\n  type: REMOVE_USER\n});\n\n/* ---------------------------- Thunk Action Creators ----------------------- */\n\nexport const authenticate = () => async dispatch => {\n  const response = await fetch('/api/auth/', {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  if (response.ok) {\n    const data = await response.json();\n    if (data.errors) {\n      return;\n    }\n    dispatch(setUser(data));\n  }\n};\nexport const login = (email, password) => async dispatch => {\n  const response = await fetch('/api/auth/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n  if (response.ok) {\n    const data = await response.json();\n    dispatch(setUser(data));\n    return null;\n  } else if (response.status < 500) {\n    const data = await response.json();\n    if (data.errors) {\n      return data.errors;\n    }\n  } else {\n    return ['An error occurred. Please try again.'];\n  }\n};\nexport const logout = () => async dispatch => {\n  const response = await fetch('/api/auth/logout', {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  if (response.ok) {\n    dispatch(removeUser());\n  }\n};\nexport const signUp = (username, email, firstName, lastName, password) => async dispatch => {\n  const response = await fetch('/api/auth/signup', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      username,\n      email,\n      first_name: firstName,\n      last_name: lastName,\n      password\n    })\n  });\n  if (response.ok) {\n    const data = await response.json();\n    dispatch(setUser(data));\n    return null;\n  } else if (response.status < 500) {\n    const data = await response.json();\n    if (data.errors) {\n      return data.errors;\n    }\n  } else {\n    return ['An error occurred. Please try again.'];\n  }\n};\n\n/* -------------------------------- Reducer ---------------------------- */\n\nconst initialState = {\n  user: null\n};\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case SET_USER:\n      return {\n        user: action.payload\n      };\n    case REMOVE_USER:\n      return {\n        user: null\n      };\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["SET_USER","REMOVE_USER","setUser","user","type","payload","removeUser","authenticate","dispatch","response","fetch","headers","ok","data","json","errors","login","email","password","method","body","JSON","stringify","status","logout","signUp","username","firstName","lastName","first_name","last_name","initialState","reducer","state","action"],"sources":["/Users/rohan/Desktop/team-project-2024849-sprinters/front-end/src/store/session.js"],"sourcesContent":["/* ------------------------------ Action Types -------------------------- */\n\nconst SET_USER = 'session/SET_USER';\nconst REMOVE_USER = 'session/REMOVE_USER';\n\n/* ---------------------------- Action Creators -------------------------- */\n\nconst setUser = (user) => ({\n  type: SET_USER,\n  payload: user\n});\n\nconst removeUser = () => ({\n  type: REMOVE_USER,\n})\n\n/* ---------------------------- Thunk Action Creators ----------------------- */\n\n\nexport const authenticate = () => async (dispatch) => {\n  const response = await fetch('/api/auth/', {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  if (response.ok) {\n    const data = await response.json();\n    if (data.errors) {\n      return;\n    }\n\n    dispatch(setUser(data));\n  }\n}\n\n\nexport const login = (email, password) => async (dispatch) => {\n  const response = await fetch('/api/auth/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  });\n\n  if (response.ok) {\n    const data = await response.json();\n    dispatch(setUser(data))\n    return null;\n  } else if (response.status < 500) {\n    const data = await response.json();\n    if (data.errors) {\n      return data.errors;\n    }\n  } else {\n    return ['An error occurred. Please try again.']\n  }\n}\n\n\nexport const logout = () => async (dispatch) => {\n  const response = await fetch('/api/auth/logout', {\n    headers: {\n      'Content-Type': 'application/json',\n    }\n  });\n\n  if (response.ok) {\n    dispatch(removeUser());\n  }\n};\n\n\nexport const signUp = (username, email, firstName, lastName, password) => async (dispatch) => {\n  const response = await fetch('/api/auth/signup', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      username,\n      email,\n      first_name: firstName,\n      last_name: lastName,\n      password,\n    }),\n  });\n\n  if (response.ok) {\n    const data = await response.json();\n    dispatch(setUser(data))\n    return null;\n  } else if (response.status < 500) {\n    const data = await response.json();\n    if (data.errors) {\n      return data.errors;\n    }\n  } else {\n    return ['An error occurred. Please try again.']\n  }\n}\n\n\n/* -------------------------------- Reducer ---------------------------- */\n\nconst initialState = { user: null };\n\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case SET_USER:\n      return { user: action.payload }\n    case REMOVE_USER:\n      return { user: null }\n    default:\n      return state;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}